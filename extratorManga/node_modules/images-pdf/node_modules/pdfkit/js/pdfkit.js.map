{"version":3,"file":"pdfkit.js","sources":["../lib/abstract_reference.js","../lib/object.js","../lib/reference.js","../lib/page.js","../lib/security.js","../lib/gradient.js","../lib/mixins/color.js","../lib/path.js","../lib/mixins/vector.js","../lib/font/afm.js","../lib/font.js","../lib/font/standard.js","../lib/font/embedded.js","../lib/font_factory.js","../lib/mixins/fonts.js","../lib/line_wrapper.js","../lib/mixins/text.js","../lib/image/jpeg.js","../lib/image/png.js","../lib/image.js","../lib/mixins/images.js","../lib/mixins/annotations.js","../lib/outline.js","../lib/mixins/outline.js","../lib/document.js"],"sourcesContent":["/*\r\nPDFAbstractReference - abstract class for PDF reference\r\n*/\r\n\r\nclass PDFAbstractReference {\r\n  toString() {\r\n    throw new Error('Must be implemented by subclasses');\r\n  }\r\n}\r\n\r\nexport default PDFAbstractReference;\r\n","/*\r\nPDFObject - converts JavaScript types into their corresponding PDF types.\r\nBy Devon Govett\r\n*/\r\n\r\nimport PDFAbstractReference from './abstract_reference';\r\n\r\nconst pad = (str, length) => (Array(length + 1).join('0') + str).slice(-length);\r\n\r\nconst escapableRe = /[\\n\\r\\t\\b\\f\\(\\)\\\\]/g;\r\nconst escapable = {\r\n  '\\n': '\\\\n',\r\n  '\\r': '\\\\r',\r\n  '\\t': '\\\\t',\r\n  '\\b': '\\\\b',\r\n  '\\f': '\\\\f',\r\n  '\\\\': '\\\\\\\\',\r\n  '(': '\\\\(',\r\n  ')': '\\\\)'\r\n};\r\n\r\n// Convert little endian UTF-16 to big endian\r\nconst swapBytes = function(buff) {\r\n  const l = buff.length;\r\n  if (l & 0x01) {\r\n    throw new Error('Buffer length must be even');\r\n  } else {\r\n    for (let i = 0, end = l - 1; i < end; i += 2) {\r\n      const a = buff[i];\r\n      buff[i] = buff[i + 1];\r\n      buff[i + 1] = a;\r\n    }\r\n  }\r\n\r\n  return buff;\r\n};\r\n\r\nclass PDFObject {\r\n  static convert(object, encryptFn = null) {\r\n    // String literals are converted to the PDF name type\r\n    if (typeof object === 'string') {\r\n      return `/${object}`;\r\n\r\n      // String objects are converted to PDF strings (UTF-16)\r\n    } else if (object instanceof String) {\r\n      let string = object;\r\n      // Detect if this is a unicode string\r\n      let isUnicode = false;\r\n      for (let i = 0, end = string.length; i < end; i++) {\r\n        if (string.charCodeAt(i) > 0x7f) {\r\n          isUnicode = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      // If so, encode it as big endian UTF-16\r\n      let stringBuffer;\r\n      if (isUnicode) {\r\n        stringBuffer = swapBytes(Buffer.from(`\\ufeff${string}`, 'utf16le'));\r\n      } else {\r\n        stringBuffer = Buffer.from(string.valueOf(), 'ascii');\r\n      }\r\n\r\n      // Encrypt the string when necessary\r\n      if (encryptFn) {\r\n        string = encryptFn(stringBuffer).toString('binary');\r\n      } else {\r\n        string = stringBuffer.toString('binary');\r\n      }\r\n\r\n      // Escape characters as required by the spec\r\n      string = string.replace(escapableRe, c => escapable[c]);\r\n\r\n      return `(${string})`;\r\n\r\n      // Buffers are converted to PDF hex strings\r\n    } else if (Buffer.isBuffer(object)) {\r\n      return `<${object.toString('hex')}>`;\r\n    } else if (object instanceof PDFAbstractReference) {\r\n      return object.toString();\r\n    } else if (object instanceof Date) {\r\n      let string =\r\n        `D:${pad(object.getUTCFullYear(), 4)}` +\r\n        pad(object.getUTCMonth() + 1, 2) +\r\n        pad(object.getUTCDate(), 2) +\r\n        pad(object.getUTCHours(), 2) +\r\n        pad(object.getUTCMinutes(), 2) +\r\n        pad(object.getUTCSeconds(), 2) +\r\n        'Z';\r\n\r\n      // Encrypt the string when necessary\r\n      if (encryptFn) {\r\n        string = encryptFn(new Buffer(string, 'ascii')).toString('binary');\r\n\r\n        // Escape characters as required by the spec\r\n        string = string.replace(escapableRe, c => escapable[c]);\r\n      }\r\n\r\n      return `(${string})`;\r\n    } else if (Array.isArray(object)) {\r\n      const items = object.map(e => PDFObject.convert(e, encryptFn)).join(' ');\r\n      return `[${items}]`;\r\n    } else if ({}.toString.call(object) === '[object Object]') {\r\n      const out = ['<<'];\r\n      for (let key in object) {\r\n        const val = object[key];\r\n        out.push(`/${key} ${PDFObject.convert(val, encryptFn)}`);\r\n      }\r\n\r\n      out.push('>>');\r\n      return out.join('\\n');\r\n    } else if (typeof object === 'number') {\r\n      return PDFObject.number(object);\r\n    } else {\r\n      return `${object}`;\r\n    }\r\n  }\r\n\r\n  static number(n) {\r\n    if (n > -1e21 && n < 1e21) {\r\n      return Math.round(n * 1e6) / 1e6;\r\n    }\r\n\r\n    throw new Error(`unsupported number: ${n}`);\r\n  }\r\n}\r\n\r\nexport default PDFObject;\r\n","/*\r\nPDFReference - represents a reference to another object in the PDF object heirarchy\r\nBy Devon Govett\r\n*/\r\n\r\nimport zlib from 'zlib';\r\nimport PDFAbstractReference from './abstract_reference';\r\nimport PDFObject from './object';\r\n\r\nclass PDFReference extends PDFAbstractReference {\r\n  constructor(document, id, data) {\r\n    super();\r\n    this.document = document;\r\n    this.id = id;\r\n    if (data == null) {\r\n      data = {};\r\n    }\r\n    this.data = data;\r\n    this.gen = 0;\r\n    this.compress = this.document.compress && !this.data.Filter;\r\n    this.uncompressedLength = 0;\r\n    this.buffer = [];\r\n  }\r\n\r\n  write(chunk) {\r\n    if (!Buffer.isBuffer(chunk)) {\r\n      chunk = new Buffer(chunk + '\\n', 'binary');\r\n    }\r\n\r\n    this.uncompressedLength += chunk.length;\r\n    if (this.data.Length == null) {\r\n      this.data.Length = 0;\r\n    }\r\n    this.buffer.push(chunk);\r\n    this.data.Length += chunk.length;\r\n    if (this.compress) {\r\n      return (this.data.Filter = 'FlateDecode');\r\n    }\r\n  }\r\n\r\n  end(chunk) {\r\n    if (chunk) {\r\n      this.write(chunk);\r\n    }\r\n    return this.finalize();\r\n  }\r\n\r\n  finalize() {\r\n    this.offset = this.document._offset;\r\n\r\n    const encryptFn = this.document._security\r\n      ? this.document._security.getEncryptFn(this.id, this.gen)\r\n      : null;\r\n\r\n    if (this.buffer.length) {\r\n      this.buffer = Buffer.concat(this.buffer);\r\n      if (this.compress) {\r\n        this.buffer = zlib.deflateSync(this.buffer);\r\n      }\r\n\r\n      if (encryptFn) {\r\n        this.buffer = encryptFn(this.buffer);\r\n      }\r\n\r\n      this.data.Length = this.buffer.length;\r\n    }\r\n\r\n    this.document._write(`${this.id} ${this.gen} obj`);\r\n    this.document._write(PDFObject.convert(this.data, encryptFn));\r\n\r\n    if (this.buffer.length) {\r\n      this.document._write('stream');\r\n      this.document._write(this.buffer);\r\n\r\n      this.buffer = []; // free up memory\r\n      this.document._write('\\nendstream');\r\n    }\r\n\r\n    this.document._write('endobj');\r\n    this.document._refEnd(this);\r\n  }\r\n  toString() {\r\n    return `${this.id} ${this.gen} R`;\r\n  }\r\n}\r\n\r\nexport default PDFReference;\r\n","/*\r\nPDFPage - represents a single page in the PDF document\r\nBy Devon Govett\r\n*/\r\n\r\nconst DEFAULT_MARGINS = {\r\n  top: 72,\r\n  left: 72,\r\n  bottom: 72,\r\n  right: 72\r\n};\r\n\r\nconst SIZES = {\r\n  '4A0': [4767.87, 6740.79],\r\n  '2A0': [3370.39, 4767.87],\r\n  A0: [2383.94, 3370.39],\r\n  A1: [1683.78, 2383.94],\r\n  A2: [1190.55, 1683.78],\r\n  A3: [841.89, 1190.55],\r\n  A4: [595.28, 841.89],\r\n  A5: [419.53, 595.28],\r\n  A6: [297.64, 419.53],\r\n  A7: [209.76, 297.64],\r\n  A8: [147.4, 209.76],\r\n  A9: [104.88, 147.4],\r\n  A10: [73.7, 104.88],\r\n  B0: [2834.65, 4008.19],\r\n  B1: [2004.09, 2834.65],\r\n  B2: [1417.32, 2004.09],\r\n  B3: [1000.63, 1417.32],\r\n  B4: [708.66, 1000.63],\r\n  B5: [498.9, 708.66],\r\n  B6: [354.33, 498.9],\r\n  B7: [249.45, 354.33],\r\n  B8: [175.75, 249.45],\r\n  B9: [124.72, 175.75],\r\n  B10: [87.87, 124.72],\r\n  C0: [2599.37, 3676.54],\r\n  C1: [1836.85, 2599.37],\r\n  C2: [1298.27, 1836.85],\r\n  C3: [918.43, 1298.27],\r\n  C4: [649.13, 918.43],\r\n  C5: [459.21, 649.13],\r\n  C6: [323.15, 459.21],\r\n  C7: [229.61, 323.15],\r\n  C8: [161.57, 229.61],\r\n  C9: [113.39, 161.57],\r\n  C10: [79.37, 113.39],\r\n  RA0: [2437.8, 3458.27],\r\n  RA1: [1729.13, 2437.8],\r\n  RA2: [1218.9, 1729.13],\r\n  RA3: [864.57, 1218.9],\r\n  RA4: [609.45, 864.57],\r\n  SRA0: [2551.18, 3628.35],\r\n  SRA1: [1814.17, 2551.18],\r\n  SRA2: [1275.59, 1814.17],\r\n  SRA3: [907.09, 1275.59],\r\n  SRA4: [637.8, 907.09],\r\n  EXECUTIVE: [521.86, 756.0],\r\n  FOLIO: [612.0, 936.0],\r\n  LEGAL: [612.0, 1008.0],\r\n  LETTER: [612.0, 792.0],\r\n  TABLOID: [792.0, 1224.0]\r\n};\r\n\r\nclass PDFPage {\r\n  constructor(document, options) {\r\n    this.document = document;\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    this.size = options.size || 'letter';\r\n    this.layout = options.layout || 'portrait';\r\n\r\n    // process margins\r\n    if (typeof options.margin === 'number') {\r\n      this.margins = {\r\n        top: options.margin,\r\n        left: options.margin,\r\n        bottom: options.margin,\r\n        right: options.margin\r\n      };\r\n\r\n      // default to 1 inch margins\r\n    } else {\r\n      this.margins = options.margins || DEFAULT_MARGINS;\r\n    }\r\n\r\n    // calculate page dimensions\r\n    const dimensions = Array.isArray(this.size)\r\n      ? this.size\r\n      : SIZES[this.size.toUpperCase()];\r\n    this.width = dimensions[this.layout === 'portrait' ? 0 : 1];\r\n    this.height = dimensions[this.layout === 'portrait' ? 1 : 0];\r\n\r\n    this.content = this.document.ref();\r\n\r\n    // Initialize the Font, XObject, and ExtGState dictionaries\r\n    this.resources = this.document.ref({\r\n      ProcSet: ['PDF', 'Text', 'ImageB', 'ImageC', 'ImageI']\r\n    });\r\n\r\n    // The page dictionary\r\n    this.dictionary = this.document.ref({\r\n      Type: 'Page',\r\n      Parent: this.document._root.data.Pages,\r\n      MediaBox: [0, 0, this.width, this.height],\r\n      Contents: this.content,\r\n      Resources: this.resources\r\n    });\r\n  }\r\n\r\n  // Lazily create these dictionaries\r\n  get fonts() {\r\n    const data = this.resources.data;\r\n    return data.Font != null ? data.Font : (data.Font = {});\r\n  }\r\n\r\n  get xobjects() {\r\n    const data = this.resources.data;\r\n    return data.XObject != null ? data.XObject : (data.XObject = {});\r\n  }\r\n\r\n  get ext_gstates() {\r\n    const data = this.resources.data;\r\n    return data.ExtGState != null ? data.ExtGState : (data.ExtGState = {});\r\n  }\r\n\r\n  get patterns() {\r\n    const data = this.resources.data;\r\n    return data.Pattern != null ? data.Pattern : (data.Pattern = {});\r\n  }\r\n\r\n  get annotations() {\r\n    const data = this.dictionary.data;\r\n    return data.Annots != null ? data.Annots : (data.Annots = []);\r\n  }\r\n\r\n  maxY() {\r\n    return this.height - this.margins.bottom;\r\n  }\r\n\r\n  write(chunk) {\r\n    return this.content.write(chunk);\r\n  }\r\n\r\n  end() {\r\n    this.dictionary.end();\r\n    this.resources.end();\r\n    return this.content.end();\r\n  }\r\n}\r\n\r\nexport default PDFPage;\r\n","/*\r\n   PDFSecurity - represents PDF security settings\r\n   By Yang Liu <hi@zesik.com>\r\n */\r\n\r\nimport CryptoJS from 'crypto-js';\r\nimport saslprep from 'saslprep';\r\n\r\nclass PDFSecurity {\r\n  static generateFileID(info = {}) {\r\n    let infoStr = `${info.CreationDate.getTime()}\\n`;\r\n\r\n    for (let key in info) {\r\n      if (!info.hasOwnProperty(key)) {\r\n        continue;\r\n      }\r\n      infoStr += `${key}: ${info[key].toString()}\\n`;\r\n    }\r\n\r\n    return wordArrayToBuffer(CryptoJS.MD5(infoStr));\r\n  }\r\n\r\n  static generateRandomWordArray(bytes) {\r\n    return CryptoJS.lib.WordArray.random(bytes);\r\n  }\r\n\r\n  static create(document, options = {}) {\r\n    if (!options.ownerPassword && !options.userPassword) {\r\n      return null;\r\n    }\r\n    return new PDFSecurity(document, options);\r\n  }\r\n\r\n  constructor(document, options = {}) {\r\n    if (!options.ownerPassword && !options.userPassword) {\r\n      throw new Error('None of owner password and user password is defined.');\r\n    }\r\n\r\n    this.document = document;\r\n    this._setupEncryption(options);\r\n  }\r\n\r\n  _setupEncryption(options) {\r\n    switch (options.pdfVersion) {\r\n      case '1.4':\r\n      case '1.5':\r\n        this.version = 2;\r\n        break;\r\n      case '1.6':\r\n      case '1.7':\r\n        this.version = 4;\r\n        break;\r\n      case '1.7ext3':\r\n        this.version = 5;\r\n        break;\r\n      default:\r\n        this.version = 1;\r\n        break;\r\n    }\r\n\r\n    const encDict = {\r\n      Filter: 'Standard'\r\n    };\r\n\r\n    switch (this.version) {\r\n      case 1:\r\n      case 2:\r\n      case 4:\r\n        this._setupEncryptionV1V2V4(this.version, encDict, options);\r\n        break;\r\n      case 5:\r\n        this._setupEncryptionV5(encDict, options);\r\n        break;\r\n    }\r\n\r\n    this.dictionary = this.document.ref(encDict);\r\n  }\r\n\r\n  _setupEncryptionV1V2V4(v, encDict, options) {\r\n    let r, permissions;\r\n    switch (v) {\r\n      case 1:\r\n        r = 2;\r\n        this.keyBits = 40;\r\n        permissions = getPermissionsR2(options.permissions);\r\n        break;\r\n      case 2:\r\n        r = 3;\r\n        this.keyBits = 128;\r\n        permissions = getPermissionsR3(options.permissions);\r\n        break;\r\n      case 4:\r\n        r = 4;\r\n        this.keyBits = 128;\r\n        permissions = getPermissionsR3(options.permissions);\r\n        break;\r\n    }\r\n\r\n    const paddedUserPassword = processPasswordR2R3R4(options.userPassword);\r\n    const paddedOwnerPassword = options.ownerPassword\r\n      ? processPasswordR2R3R4(options.ownerPassword)\r\n      : paddedUserPassword;\r\n\r\n    const ownerPasswordEntry = getOwnerPasswordR2R3R4(\r\n      r,\r\n      this.keyBits,\r\n      paddedUserPassword,\r\n      paddedOwnerPassword\r\n    );\r\n    this.encryptionKey = getEncryptionKeyR2R3R4(\r\n      r,\r\n      this.keyBits,\r\n      this.document._id,\r\n      paddedUserPassword,\r\n      ownerPasswordEntry,\r\n      permissions\r\n    );\r\n    let userPasswordEntry;\r\n    if (r === 2) {\r\n      userPasswordEntry = getUserPasswordR2(this.encryptionKey);\r\n    } else {\r\n      userPasswordEntry = getUserPasswordR3R4(\r\n        this.document._id,\r\n        this.encryptionKey\r\n      );\r\n    }\r\n\r\n    encDict.V = v;\r\n    if (v >= 2) {\r\n      encDict.Length = this.keyBits;\r\n    }\r\n    if (v === 4) {\r\n      encDict.CF = {\r\n        StdCF: {\r\n          AuthEvent: 'DocOpen',\r\n          CFM: 'AESV2',\r\n          Length: this.keyBits / 8\r\n        }\r\n      };\r\n      encDict.StmF = 'StdCF';\r\n      encDict.StrF = 'StdCF';\r\n    }\r\n    encDict.R = r;\r\n    encDict.O = wordArrayToBuffer(ownerPasswordEntry);\r\n    encDict.U = wordArrayToBuffer(userPasswordEntry);\r\n    encDict.P = permissions;\r\n  }\r\n\r\n  _setupEncryptionV5(encDict, options) {\r\n    this.keyBits = 256;\r\n    const permissions = getPermissionsR3(options);\r\n\r\n    const processedUserPassword = processPasswordR5(options.userPassword);\r\n    const processedOwnerPassword = options.ownerPassword\r\n      ? processPasswordR5(options.ownerPassword)\r\n      : processedUserPassword;\r\n\r\n    this.encryptionKey = getEncryptionKeyR5(\r\n      PDFSecurity.generateRandomWordArray\r\n    );\r\n    const userPasswordEntry = getUserPasswordR5(\r\n      processedUserPassword,\r\n      PDFSecurity.generateRandomWordArray\r\n    );\r\n    const userKeySalt = CryptoJS.lib.WordArray.create(\r\n      userPasswordEntry.words.slice(10, 12),\r\n      8\r\n    );\r\n    const userEncryptionKeyEntry = getUserEncryptionKeyR5(\r\n      processedUserPassword,\r\n      userKeySalt,\r\n      this.encryptionKey\r\n    );\r\n    const ownerPasswordEntry = getOwnerPasswordR5(\r\n      processedOwnerPassword,\r\n      userPasswordEntry,\r\n      PDFSecurity.generateRandomWordArray\r\n    );\r\n    const ownerKeySalt = CryptoJS.lib.WordArray.create(\r\n      ownerPasswordEntry.words.slice(10, 12),\r\n      8\r\n    );\r\n    const ownerEncryptionKeyEntry = getOwnerEncryptionKeyR5(\r\n      processedOwnerPassword,\r\n      ownerKeySalt,\r\n      userPasswordEntry,\r\n      this.encryptionKey\r\n    );\r\n    const permsEntry = getEncryptedPermissionsR5(\r\n      permissions,\r\n      this.encryptionKey,\r\n      PDFSecurity.generateRandomWordArray\r\n    );\r\n\r\n    encDict.V = 5;\r\n    encDict.Length = this.keyBits;\r\n    encDict.CF = {\r\n      StdCF: {\r\n        AuthEvent: 'DocOpen',\r\n        CFM: 'AESV3',\r\n        Length: this.keyBits / 8\r\n      }\r\n    };\r\n    encDict.StmF = 'StdCF';\r\n    encDict.StrF = 'StdCF';\r\n    encDict.R = 5;\r\n    encDict.O = wordArrayToBuffer(ownerPasswordEntry);\r\n    encDict.OE = wordArrayToBuffer(ownerEncryptionKeyEntry);\r\n    encDict.U = wordArrayToBuffer(userPasswordEntry);\r\n    encDict.UE = wordArrayToBuffer(userEncryptionKeyEntry);\r\n    encDict.P = permissions;\r\n    encDict.Perms = wordArrayToBuffer(permsEntry);\r\n  }\r\n\r\n  getEncryptFn(obj, gen) {\r\n    let digest;\r\n    if (this.version < 5) {\r\n      digest = this.encryptionKey\r\n        .clone()\r\n        .concat(\r\n          CryptoJS.lib.WordArray.create(\r\n            [\r\n              ((obj & 0xff) << 24) |\r\n                ((obj & 0xff00) << 8) |\r\n                ((obj >> 8) & 0xff00) |\r\n                (gen & 0xff),\r\n              (gen & 0xff00) << 16\r\n            ],\r\n            5\r\n          )\r\n        );\r\n    }\r\n\r\n    if (this.version === 1 || this.version === 2) {\r\n      let key = CryptoJS.MD5(digest);\r\n      key.sigBytes = Math.min(16, this.keyBits / 8 + 5);\r\n      return buffer =>\r\n        wordArrayToBuffer(\r\n          CryptoJS.RC4.encrypt(CryptoJS.lib.WordArray.create(buffer), key)\r\n            .ciphertext\r\n        );\r\n    }\r\n\r\n    let key;\r\n    if (this.version === 4) {\r\n      key = CryptoJS.MD5(\r\n        digest.concat(CryptoJS.lib.WordArray.create([0x73416c54], 4))\r\n      );\r\n    } else {\r\n      key = this.encryptionKey;\r\n    }\r\n\r\n    const iv = PDFSecurity.generateRandomWordArray(16);\r\n    const options = {\r\n      mode: CryptoJS.mode.CBC,\r\n      padding: CryptoJS.pad.Pkcs7,\r\n      iv\r\n    };\r\n\r\n    return buffer =>\r\n      wordArrayToBuffer(\r\n        iv\r\n          .clone()\r\n          .concat(\r\n            CryptoJS.AES.encrypt(\r\n              CryptoJS.lib.WordArray.create(buffer),\r\n              key,\r\n              options\r\n            ).ciphertext\r\n          )\r\n      );\r\n  }\r\n\r\n  end() {\r\n    this.dictionary.end();\r\n  }\r\n}\r\n\r\nfunction getPermissionsR2(permissionObject = {}) {\r\n  let permissions = 0xffffffc0 >> 0;\r\n  if (permissionObject.printing) {\r\n    permissions |= 0b000000000100;\r\n  }\r\n  if (permissionObject.modifying) {\r\n    permissions |= 0b000000001000;\r\n  }\r\n  if (permissionObject.copying) {\r\n    permissions |= 0b000000010000;\r\n  }\r\n  if (permissionObject.annotating) {\r\n    permissions |= 0b000000100000;\r\n  }\r\n  return permissions;\r\n}\r\n\r\nfunction getPermissionsR3(permissionObject = {}) {\r\n  let permissions = 0xfffff0c0 >> 0;\r\n  if (permissionObject.printing === 'lowResolution') {\r\n    permissions |= 0b000000000100;\r\n  }\r\n  if (permissionObject.printing === 'highResolution') {\r\n    permissions |= 0b100000000100;\r\n  }\r\n  if (permissionObject.modifying) {\r\n    permissions |= 0b000000001000;\r\n  }\r\n  if (permissionObject.copying) {\r\n    permissions |= 0b000000010000;\r\n  }\r\n  if (permissionObject.annotating) {\r\n    permissions |= 0b000000100000;\r\n  }\r\n  if (permissionObject.fillingForms) {\r\n    permissions |= 0b000100000000;\r\n  }\r\n  if (permissionObject.contentAccessibility) {\r\n    permissions |= 0b001000000000;\r\n  }\r\n  if (permissionObject.documentAssembly) {\r\n    permissions |= 0b010000000000;\r\n  }\r\n  return permissions;\r\n}\r\n\r\nfunction getUserPasswordR2(encryptionKey) {\r\n  return CryptoJS.RC4.encrypt(processPasswordR2R3R4(), encryptionKey)\r\n    .ciphertext;\r\n}\r\n\r\nfunction getUserPasswordR3R4(documentId, encryptionKey) {\r\n  const key = encryptionKey.clone();\r\n  let cipher = CryptoJS.MD5(\r\n    processPasswordR2R3R4().concat(CryptoJS.lib.WordArray.create(documentId))\r\n  );\r\n  for (let i = 0; i < 20; i++) {\r\n    const xorRound = Math.ceil(key.sigBytes / 4);\r\n    for (let j = 0; j < xorRound; j++) {\r\n      key.words[j] =\r\n        encryptionKey.words[j] ^ (i | (i << 8) | (i << 16) | (i << 24));\r\n    }\r\n    cipher = CryptoJS.RC4.encrypt(cipher, key).ciphertext;\r\n  }\r\n  return cipher.concat(CryptoJS.lib.WordArray.create(null, 16));\r\n}\r\n\r\nfunction getOwnerPasswordR2R3R4(\r\n  r,\r\n  keyBits,\r\n  paddedUserPassword,\r\n  paddedOwnerPassword\r\n) {\r\n  let digest = paddedOwnerPassword;\r\n  let round = r >= 3 ? 51 : 1;\r\n  for (let i = 0; i < round; i++) {\r\n    digest = CryptoJS.MD5(digest);\r\n  }\r\n\r\n  const key = digest.clone();\r\n  key.sigBytes = keyBits / 8;\r\n  let cipher = paddedUserPassword;\r\n  round = r >= 3 ? 20 : 1;\r\n  for (let i = 0; i < round; i++) {\r\n    const xorRound = Math.ceil(key.sigBytes / 4);\r\n    for (let j = 0; j < xorRound; j++) {\r\n      key.words[j] = digest.words[j] ^ (i | (i << 8) | (i << 16) | (i << 24));\r\n    }\r\n    cipher = CryptoJS.RC4.encrypt(cipher, key).ciphertext;\r\n  }\r\n  return cipher;\r\n}\r\n\r\nfunction getEncryptionKeyR2R3R4(\r\n  r,\r\n  keyBits,\r\n  documentId,\r\n  paddedUserPassword,\r\n  ownerPasswordEntry,\r\n  permissions\r\n) {\r\n  let key = paddedUserPassword\r\n    .clone()\r\n    .concat(ownerPasswordEntry)\r\n    .concat(CryptoJS.lib.WordArray.create([lsbFirstWord(permissions)], 4))\r\n    .concat(CryptoJS.lib.WordArray.create(documentId));\r\n  const round = r >= 3 ? 51 : 1;\r\n  for (let i = 0; i < round; i++) {\r\n    key = CryptoJS.MD5(key);\r\n    key.sigBytes = keyBits / 8;\r\n  }\r\n  return key;\r\n}\r\n\r\nfunction getUserPasswordR5(processedUserPassword, generateRandomWordArray) {\r\n  const validationSalt = generateRandomWordArray(8);\r\n  const keySalt = generateRandomWordArray(8);\r\n  return CryptoJS.SHA256(processedUserPassword.clone().concat(validationSalt))\r\n    .concat(validationSalt)\r\n    .concat(keySalt);\r\n}\r\n\r\nfunction getUserEncryptionKeyR5(\r\n  processedUserPassword,\r\n  userKeySalt,\r\n  encryptionKey\r\n) {\r\n  const key = CryptoJS.SHA256(\r\n    processedUserPassword.clone().concat(userKeySalt)\r\n  );\r\n  const options = {\r\n    mode: CryptoJS.mode.CBC,\r\n    padding: CryptoJS.pad.NoPadding,\r\n    iv: CryptoJS.lib.WordArray.create(null, 16)\r\n  };\r\n  return CryptoJS.AES.encrypt(encryptionKey, key, options).ciphertext;\r\n}\r\n\r\nfunction getOwnerPasswordR5(\r\n  processedOwnerPassword,\r\n  userPasswordEntry,\r\n  generateRandomWordArray\r\n) {\r\n  const validationSalt = generateRandomWordArray(8);\r\n  const keySalt = generateRandomWordArray(8);\r\n  return CryptoJS.SHA256(\r\n    processedOwnerPassword\r\n      .clone()\r\n      .concat(validationSalt)\r\n      .concat(userPasswordEntry)\r\n  )\r\n    .concat(validationSalt)\r\n    .concat(keySalt);\r\n}\r\n\r\nfunction getOwnerEncryptionKeyR5(\r\n  processedOwnerPassword,\r\n  ownerKeySalt,\r\n  userPasswordEntry,\r\n  encryptionKey\r\n) {\r\n  const key = CryptoJS.SHA256(\r\n    processedOwnerPassword\r\n      .clone()\r\n      .concat(ownerKeySalt)\r\n      .concat(userPasswordEntry)\r\n  );\r\n  const options = {\r\n    mode: CryptoJS.mode.CBC,\r\n    padding: CryptoJS.pad.NoPadding,\r\n    iv: CryptoJS.lib.WordArray.create(null, 16)\r\n  };\r\n  return CryptoJS.AES.encrypt(encryptionKey, key, options).ciphertext;\r\n}\r\n\r\nfunction getEncryptionKeyR5(generateRandomWordArray) {\r\n  return generateRandomWordArray(32);\r\n}\r\n\r\nfunction getEncryptedPermissionsR5(\r\n  permissions,\r\n  encryptionKey,\r\n  generateRandomWordArray\r\n) {\r\n  const cipher = CryptoJS.lib.WordArray.create(\r\n    [lsbFirstWord(permissions), 0xffffffff, 0x54616462],\r\n    12\r\n  ).concat(generateRandomWordArray(4));\r\n  const options = {\r\n    mode: CryptoJS.mode.ECB,\r\n    padding: CryptoJS.pad.NoPadding\r\n  };\r\n  return CryptoJS.AES.encrypt(cipher, encryptionKey, options).ciphertext;\r\n}\r\n\r\nfunction processPasswordR2R3R4(password = '') {\r\n  const out = new Buffer(32);\r\n  const length = password.length;\r\n  let index = 0;\r\n  while (index < length && index < 32) {\r\n    const code = password.charCodeAt(index);\r\n    if (code > 0xff) {\r\n      throw new Error('Password contains one or more invalid characters.');\r\n    }\r\n    out[index] = code;\r\n    index++;\r\n  }\r\n  while (index < 32) {\r\n    out[index] = PASSWORD_PADDING[index - length];\r\n    index++;\r\n  }\r\n  return CryptoJS.lib.WordArray.create(out);\r\n}\r\n\r\nfunction processPasswordR5(password = '') {\r\n  password = unescape(encodeURIComponent(saslprep(password)));\r\n  const length = Math.min(127, password.length);\r\n  const out = new Buffer(length);\r\n\r\n  for (let i = 0; i < length; i++) {\r\n    out[i] = password.charCodeAt(i);\r\n  }\r\n\r\n  return CryptoJS.lib.WordArray.create(out);\r\n}\r\n\r\nfunction lsbFirstWord(data) {\r\n  return (\r\n    ((data & 0xff) << 24) |\r\n    ((data & 0xff00) << 8) |\r\n    ((data >> 8) & 0xff00) |\r\n    ((data >> 24) & 0xff)\r\n  );\r\n}\r\n\r\nfunction wordArrayToBuffer(wordArray) {\r\n  const byteArray = [];\r\n  for (let i = 0; i < wordArray.sigBytes; i++) {\r\n    byteArray.push(\r\n      (wordArray.words[Math.floor(i / 4)] >> (8 * (3 - (i % 4)))) & 0xff\r\n    );\r\n  }\r\n  return Buffer.from(byteArray);\r\n}\r\n\r\nconst PASSWORD_PADDING = [\r\n  0x28,\r\n  0xbf,\r\n  0x4e,\r\n  0x5e,\r\n  0x4e,\r\n  0x75,\r\n  0x8a,\r\n  0x41,\r\n  0x64,\r\n  0x00,\r\n  0x4e,\r\n  0x56,\r\n  0xff,\r\n  0xfa,\r\n  0x01,\r\n  0x08,\r\n  0x2e,\r\n  0x2e,\r\n  0x00,\r\n  0xb6,\r\n  0xd0,\r\n  0x68,\r\n  0x3e,\r\n  0x80,\r\n  0x2f,\r\n  0x0c,\r\n  0xa9,\r\n  0xfe,\r\n  0x64,\r\n  0x53,\r\n  0x69,\r\n  0x7a\r\n];\r\n\r\nexport default PDFSecurity;\r\n","import PDFObject from './object';\r\n\r\nconst { number } = PDFObject;\r\n\r\nclass PDFGradient {\r\n  constructor(doc) {\r\n    this.doc = doc;\r\n    this.stops = [];\r\n    this.embedded = false;\r\n    this.transform = [1, 0, 0, 1, 0, 0];\r\n  }\r\n\r\n  stop(pos, color, opacity) {\r\n    if (opacity == null) {\r\n      opacity = 1;\r\n    }\r\n    color = this.doc._normalizeColor(color);\r\n\r\n    if (this.stops.length === 0) {\r\n      if (color.length === 3) {\r\n        this._colorSpace = 'DeviceRGB';\r\n      } else if (color.length === 4) {\r\n        this._colorSpace = 'DeviceCMYK';\r\n      } else if (color.length === 1) {\r\n        this._colorSpace = 'DeviceGray';\r\n      } else {\r\n        throw new Error('Unknown color space');\r\n      }\r\n    } else if (\r\n      (this._colorSpace === 'DeviceRGB' && color.length !== 3) ||\r\n      (this._colorSpace === 'DeviceCMYK' && color.length !== 4) ||\r\n      (this._colorSpace === 'DeviceGray' && color.length !== 1)\r\n    ) {\r\n      throw new Error('All gradient stops must use the same color space');\r\n    }\r\n\r\n    opacity = Math.max(0, Math.min(1, opacity));\r\n    this.stops.push([pos, color, opacity]);\r\n    return this;\r\n  }\r\n\r\n  setTransform(m11, m12, m21, m22, dx, dy) {\r\n    this.transform = [m11, m12, m21, m22, dx, dy];\r\n    return this;\r\n  }\r\n\r\n  embed(m) {\r\n    let fn;\r\n    if (this.stops.length === 0) {\r\n      return;\r\n    }\r\n    this.embedded = true;\r\n    this.matrix = m;\r\n\r\n    // if the last stop comes before 100%, add a copy at 100%\r\n    const last = this.stops[this.stops.length - 1];\r\n    if (last[0] < 1) {\r\n      this.stops.push([1, last[1], last[2]]);\r\n    }\r\n\r\n    const bounds = [];\r\n    const encode = [];\r\n    const stops = [];\r\n\r\n    for (let i = 0, stopsLength = this.stops.length - 1; i < stopsLength; i++) {\r\n      encode.push(0, 1);\r\n      if (i + 2 !== stopsLength) {\r\n        bounds.push(this.stops[i + 1][0]);\r\n      }\r\n\r\n      fn = this.doc.ref({\r\n        FunctionType: 2,\r\n        Domain: [0, 1],\r\n        C0: this.stops[i + 0][1],\r\n        C1: this.stops[i + 1][1],\r\n        N: 1\r\n      });\r\n\r\n      stops.push(fn);\r\n      fn.end();\r\n    }\r\n\r\n    // if there are only two stops, we don't need a stitching function\r\n    if (stops.length === 1) {\r\n      fn = stops[0];\r\n    } else {\r\n      fn = this.doc.ref({\r\n        FunctionType: 3, // stitching function\r\n        Domain: [0, 1],\r\n        Functions: stops,\r\n        Bounds: bounds,\r\n        Encode: encode\r\n      });\r\n\r\n      fn.end();\r\n    }\r\n\r\n    this.id = `Sh${++this.doc._gradCount}`;\r\n\r\n    const shader = this.shader(fn);\r\n    shader.end();\r\n\r\n    const pattern = this.doc.ref({\r\n      Type: 'Pattern',\r\n      PatternType: 2,\r\n      Shading: shader,\r\n      Matrix: this.matrix.map(v => number(v))\r\n    });\r\n\r\n    pattern.end();\r\n\r\n    if (this.stops.some(stop => stop[2] < 1)) {\r\n      let grad = this.opacityGradient();\r\n      grad._colorSpace = 'DeviceGray';\r\n\r\n      for (let stop of this.stops) {\r\n        grad.stop(stop[0], [stop[2]]);\r\n      }\r\n\r\n      grad = grad.embed(this.matrix);\r\n\r\n      const pageBBox = [0, 0, this.doc.page.width, this.doc.page.height];\r\n\r\n      const form = this.doc.ref({\r\n        Type: 'XObject',\r\n        Subtype: 'Form',\r\n        FormType: 1,\r\n        BBox: pageBBox,\r\n        Group: {\r\n          Type: 'Group',\r\n          S: 'Transparency',\r\n          CS: 'DeviceGray'\r\n        },\r\n        Resources: {\r\n          ProcSet: ['PDF', 'Text', 'ImageB', 'ImageC', 'ImageI'],\r\n          Pattern: {\r\n            Sh1: grad\r\n          }\r\n        }\r\n      });\r\n\r\n      form.write('/Pattern cs /Sh1 scn');\r\n      form.end(`${pageBBox.join(' ')} re f`);\r\n\r\n      const gstate = this.doc.ref({\r\n        Type: 'ExtGState',\r\n        SMask: {\r\n          Type: 'Mask',\r\n          S: 'Luminosity',\r\n          G: form\r\n        }\r\n      });\r\n\r\n      gstate.end();\r\n\r\n      const opacityPattern = this.doc.ref({\r\n        Type: 'Pattern',\r\n        PatternType: 1,\r\n        PaintType: 1,\r\n        TilingType: 2,\r\n        BBox: pageBBox,\r\n        XStep: pageBBox[2],\r\n        YStep: pageBBox[3],\r\n        Resources: {\r\n          ProcSet: ['PDF', 'Text', 'ImageB', 'ImageC', 'ImageI'],\r\n          Pattern: {\r\n            Sh1: pattern\r\n          },\r\n          ExtGState: {\r\n            Gs1: gstate\r\n          }\r\n        }\r\n      });\r\n\r\n      opacityPattern.write('/Gs1 gs /Pattern cs /Sh1 scn');\r\n      opacityPattern.end(`${pageBBox.join(' ')} re f`);\r\n\r\n      this.doc.page.patterns[this.id] = opacityPattern;\r\n    } else {\r\n      this.doc.page.patterns[this.id] = pattern;\r\n    }\r\n\r\n    return pattern;\r\n  }\r\n\r\n  apply(op) {\r\n    // apply gradient transform to existing document ctm\r\n    const [m0, m1, m2, m3, m4, m5] = this.doc._ctm;\r\n    const [m11, m12, m21, m22, dx, dy] = this.transform;\r\n    const m = [\r\n      m0 * m11 + m2 * m12,\r\n      m1 * m11 + m3 * m12,\r\n      m0 * m21 + m2 * m22,\r\n      m1 * m21 + m3 * m22,\r\n      m0 * dx + m2 * dy + m4,\r\n      m1 * dx + m3 * dy + m5\r\n    ];\r\n\r\n    if (!this.embedded || m.join(' ') !== this.matrix.join(' ')) {\r\n      this.embed(m);\r\n    }\r\n    return this.doc.addContent(`/${this.id} ${op}`);\r\n  }\r\n}\r\n\r\nclass PDFLinearGradient extends PDFGradient {\r\n  constructor(doc, x1, y1, x2, y2) {\r\n    super(doc);\r\n    this.x1 = x1;\r\n    this.y1 = y1;\r\n    this.x2 = x2;\r\n    this.y2 = y2;\r\n  }\r\n\r\n  shader(fn) {\r\n    return this.doc.ref({\r\n      ShadingType: 2,\r\n      ColorSpace: this._colorSpace,\r\n      Coords: [this.x1, this.y1, this.x2, this.y2],\r\n      Function: fn,\r\n      Extend: [true, true]\r\n    });\r\n  }\r\n\r\n  opacityGradient() {\r\n    return new PDFLinearGradient(this.doc, this.x1, this.y1, this.x2, this.y2);\r\n  }\r\n}\r\n\r\nclass PDFRadialGradient extends PDFGradient {\r\n  constructor(doc, x1, y1, r1, x2, y2, r2) {\r\n    super(doc);\r\n    this.doc = doc;\r\n    this.x1 = x1;\r\n    this.y1 = y1;\r\n    this.r1 = r1;\r\n    this.x2 = x2;\r\n    this.y2 = y2;\r\n    this.r2 = r2;\r\n  }\r\n\r\n  shader(fn) {\r\n    return this.doc.ref({\r\n      ShadingType: 3,\r\n      ColorSpace: this._colorSpace,\r\n      Coords: [this.x1, this.y1, this.r1, this.x2, this.y2, this.r2],\r\n      Function: fn,\r\n      Extend: [true, true]\r\n    });\r\n  }\r\n\r\n  opacityGradient() {\r\n    return new PDFRadialGradient(\r\n      this.doc,\r\n      this.x1,\r\n      this.y1,\r\n      this.r1,\r\n      this.x2,\r\n      this.y2,\r\n      this.r2\r\n    );\r\n  }\r\n}\r\n\r\nexport default { PDFGradient, PDFLinearGradient, PDFRadialGradient };\r\n","import Gradient from '../gradient';\r\n\r\nconst { PDFGradient, PDFLinearGradient, PDFRadialGradient } = Gradient;\r\n\r\nexport default {\r\n  initColor() {\r\n    // The opacity dictionaries\r\n    this._opacityRegistry = {};\r\n    this._opacityCount = 0;\r\n    return (this._gradCount = 0);\r\n  },\r\n\r\n  _normalizeColor(color) {\r\n    if (color instanceof PDFGradient) {\r\n      return color;\r\n    }\r\n\r\n    if (typeof color === 'string') {\r\n      if (color.charAt(0) === '#') {\r\n        if (color.length === 4) {\r\n          color = color.replace(\r\n            /#([0-9A-F])([0-9A-F])([0-9A-F])/i,\r\n            '#$1$1$2$2$3$3'\r\n          );\r\n        }\r\n        const hex = parseInt(color.slice(1), 16);\r\n        color = [hex >> 16, (hex >> 8) & 0xff, hex & 0xff];\r\n      } else if (namedColors[color]) {\r\n        color = namedColors[color];\r\n      }\r\n    }\r\n\r\n    if (Array.isArray(color)) {\r\n      // RGB\r\n      if (color.length === 3) {\r\n        color = color.map(part => part / 255);\r\n        // CMYK\r\n      } else if (color.length === 4) {\r\n        color = color.map(part => part / 100);\r\n      }\r\n      return color;\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  _setColor(color, stroke) {\r\n    color = this._normalizeColor(color);\r\n    if (!color) {\r\n      return false;\r\n    }\r\n\r\n    const op = stroke ? 'SCN' : 'scn';\r\n\r\n    if (color instanceof PDFGradient) {\r\n      this._setColorSpace('Pattern', stroke);\r\n      color.apply(op);\r\n    } else {\r\n      const space = color.length === 4 ? 'DeviceCMYK' : 'DeviceRGB';\r\n      this._setColorSpace(space, stroke);\r\n\r\n      color = color.join(' ');\r\n      this.addContent(`${color} ${op}`);\r\n    }\r\n\r\n    return true;\r\n  },\r\n\r\n  _setColorSpace(space, stroke) {\r\n    const op = stroke ? 'CS' : 'cs';\r\n    return this.addContent(`/${space} ${op}`);\r\n  },\r\n\r\n  fillColor(color, opacity) {\r\n    const set = this._setColor(color, false);\r\n    if (set) {\r\n      this.fillOpacity(opacity);\r\n    }\r\n\r\n    // save this for text wrapper, which needs to reset\r\n    // the fill color on new pages\r\n    this._fillColor = [color, opacity];\r\n    return this;\r\n  },\r\n\r\n  strokeColor(color, opacity) {\r\n    const set = this._setColor(color, true);\r\n    if (set) {\r\n      this.strokeOpacity(opacity);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  opacity(opacity) {\r\n    this._doOpacity(opacity, opacity);\r\n    return this;\r\n  },\r\n\r\n  fillOpacity(opacity) {\r\n    this._doOpacity(opacity, null);\r\n    return this;\r\n  },\r\n\r\n  strokeOpacity(opacity) {\r\n    this._doOpacity(null, opacity);\r\n    return this;\r\n  },\r\n\r\n  _doOpacity(fillOpacity, strokeOpacity) {\r\n    let dictionary, name;\r\n    if (fillOpacity == null && strokeOpacity == null) {\r\n      return;\r\n    }\r\n\r\n    if (fillOpacity != null) {\r\n      fillOpacity = Math.max(0, Math.min(1, fillOpacity));\r\n    }\r\n    if (strokeOpacity != null) {\r\n      strokeOpacity = Math.max(0, Math.min(1, strokeOpacity));\r\n    }\r\n    const key = `${fillOpacity}_${strokeOpacity}`;\r\n\r\n    if (this._opacityRegistry[key]) {\r\n      [dictionary, name] = this._opacityRegistry[key];\r\n    } else {\r\n      dictionary = { Type: 'ExtGState' };\r\n\r\n      if (fillOpacity != null) {\r\n        dictionary.ca = fillOpacity;\r\n      }\r\n      if (strokeOpacity != null) {\r\n        dictionary.CA = strokeOpacity;\r\n      }\r\n\r\n      dictionary = this.ref(dictionary);\r\n      dictionary.end();\r\n      const id = ++this._opacityCount;\r\n      name = `Gs${id}`;\r\n      this._opacityRegistry[key] = [dictionary, name];\r\n    }\r\n\r\n    this.page.ext_gstates[name] = dictionary;\r\n    return this.addContent(`/${name} gs`);\r\n  },\r\n\r\n  linearGradient(x1, y1, x2, y2) {\r\n    return new PDFLinearGradient(this, x1, y1, x2, y2);\r\n  },\r\n\r\n  radialGradient(x1, y1, r1, x2, y2, r2) {\r\n    return new PDFRadialGradient(this, x1, y1, r1, x2, y2, r2);\r\n  }\r\n};\r\n\r\nvar namedColors = {\r\n  aliceblue: [240, 248, 255],\r\n  antiquewhite: [250, 235, 215],\r\n  aqua: [0, 255, 255],\r\n  aquamarine: [127, 255, 212],\r\n  azure: [240, 255, 255],\r\n  beige: [245, 245, 220],\r\n  bisque: [255, 228, 196],\r\n  black: [0, 0, 0],\r\n  blanchedalmond: [255, 235, 205],\r\n  blue: [0, 0, 255],\r\n  blueviolet: [138, 43, 226],\r\n  brown: [165, 42, 42],\r\n  burlywood: [222, 184, 135],\r\n  cadetblue: [95, 158, 160],\r\n  chartreuse: [127, 255, 0],\r\n  chocolate: [210, 105, 30],\r\n  coral: [255, 127, 80],\r\n  cornflowerblue: [100, 149, 237],\r\n  cornsilk: [255, 248, 220],\r\n  crimson: [220, 20, 60],\r\n  cyan: [0, 255, 255],\r\n  darkblue: [0, 0, 139],\r\n  darkcyan: [0, 139, 139],\r\n  darkgoldenrod: [184, 134, 11],\r\n  darkgray: [169, 169, 169],\r\n  darkgreen: [0, 100, 0],\r\n  darkgrey: [169, 169, 169],\r\n  darkkhaki: [189, 183, 107],\r\n  darkmagenta: [139, 0, 139],\r\n  darkolivegreen: [85, 107, 47],\r\n  darkorange: [255, 140, 0],\r\n  darkorchid: [153, 50, 204],\r\n  darkred: [139, 0, 0],\r\n  darksalmon: [233, 150, 122],\r\n  darkseagreen: [143, 188, 143],\r\n  darkslateblue: [72, 61, 139],\r\n  darkslategray: [47, 79, 79],\r\n  darkslategrey: [47, 79, 79],\r\n  darkturquoise: [0, 206, 209],\r\n  darkviolet: [148, 0, 211],\r\n  deeppink: [255, 20, 147],\r\n  deepskyblue: [0, 191, 255],\r\n  dimgray: [105, 105, 105],\r\n  dimgrey: [105, 105, 105],\r\n  dodgerblue: [30, 144, 255],\r\n  firebrick: [178, 34, 34],\r\n  floralwhite: [255, 250, 240],\r\n  forestgreen: [34, 139, 34],\r\n  fuchsia: [255, 0, 255],\r\n  gainsboro: [220, 220, 220],\r\n  ghostwhite: [248, 248, 255],\r\n  gold: [255, 215, 0],\r\n  goldenrod: [218, 165, 32],\r\n  gray: [128, 128, 128],\r\n  grey: [128, 128, 128],\r\n  green: [0, 128, 0],\r\n  greenyellow: [173, 255, 47],\r\n  honeydew: [240, 255, 240],\r\n  hotpink: [255, 105, 180],\r\n  indianred: [205, 92, 92],\r\n  indigo: [75, 0, 130],\r\n  ivory: [255, 255, 240],\r\n  khaki: [240, 230, 140],\r\n  lavender: [230, 230, 250],\r\n  lavenderblush: [255, 240, 245],\r\n  lawngreen: [124, 252, 0],\r\n  lemonchiffon: [255, 250, 205],\r\n  lightblue: [173, 216, 230],\r\n  lightcoral: [240, 128, 128],\r\n  lightcyan: [224, 255, 255],\r\n  lightgoldenrodyellow: [250, 250, 210],\r\n  lightgray: [211, 211, 211],\r\n  lightgreen: [144, 238, 144],\r\n  lightgrey: [211, 211, 211],\r\n  lightpink: [255, 182, 193],\r\n  lightsalmon: [255, 160, 122],\r\n  lightseagreen: [32, 178, 170],\r\n  lightskyblue: [135, 206, 250],\r\n  lightslategray: [119, 136, 153],\r\n  lightslategrey: [119, 136, 153],\r\n  lightsteelblue: [176, 196, 222],\r\n  lightyellow: [255, 255, 224],\r\n  lime: [0, 255, 0],\r\n  limegreen: [50, 205, 50],\r\n  linen: [250, 240, 230],\r\n  magenta: [255, 0, 255],\r\n  maroon: [128, 0, 0],\r\n  mediumaquamarine: [102, 205, 170],\r\n  mediumblue: [0, 0, 205],\r\n  mediumorchid: [186, 85, 211],\r\n  mediumpurple: [147, 112, 219],\r\n  mediumseagreen: [60, 179, 113],\r\n  mediumslateblue: [123, 104, 238],\r\n  mediumspringgreen: [0, 250, 154],\r\n  mediumturquoise: [72, 209, 204],\r\n  mediumvioletred: [199, 21, 133],\r\n  midnightblue: [25, 25, 112],\r\n  mintcream: [245, 255, 250],\r\n  mistyrose: [255, 228, 225],\r\n  moccasin: [255, 228, 181],\r\n  navajowhite: [255, 222, 173],\r\n  navy: [0, 0, 128],\r\n  oldlace: [253, 245, 230],\r\n  olive: [128, 128, 0],\r\n  olivedrab: [107, 142, 35],\r\n  orange: [255, 165, 0],\r\n  orangered: [255, 69, 0],\r\n  orchid: [218, 112, 214],\r\n  palegoldenrod: [238, 232, 170],\r\n  palegreen: [152, 251, 152],\r\n  paleturquoise: [175, 238, 238],\r\n  palevioletred: [219, 112, 147],\r\n  papayawhip: [255, 239, 213],\r\n  peachpuff: [255, 218, 185],\r\n  peru: [205, 133, 63],\r\n  pink: [255, 192, 203],\r\n  plum: [221, 160, 221],\r\n  powderblue: [176, 224, 230],\r\n  purple: [128, 0, 128],\r\n  red: [255, 0, 0],\r\n  rosybrown: [188, 143, 143],\r\n  royalblue: [65, 105, 225],\r\n  saddlebrown: [139, 69, 19],\r\n  salmon: [250, 128, 114],\r\n  sandybrown: [244, 164, 96],\r\n  seagreen: [46, 139, 87],\r\n  seashell: [255, 245, 238],\r\n  sienna: [160, 82, 45],\r\n  silver: [192, 192, 192],\r\n  skyblue: [135, 206, 235],\r\n  slateblue: [106, 90, 205],\r\n  slategray: [112, 128, 144],\r\n  slategrey: [112, 128, 144],\r\n  snow: [255, 250, 250],\r\n  springgreen: [0, 255, 127],\r\n  steelblue: [70, 130, 180],\r\n  tan: [210, 180, 140],\r\n  teal: [0, 128, 128],\r\n  thistle: [216, 191, 216],\r\n  tomato: [255, 99, 71],\r\n  turquoise: [64, 224, 208],\r\n  violet: [238, 130, 238],\r\n  wheat: [245, 222, 179],\r\n  white: [255, 255, 255],\r\n  whitesmoke: [245, 245, 245],\r\n  yellow: [255, 255, 0],\r\n  yellowgreen: [154, 205, 50]\r\n};\r\n","let cx, cy, px, py, sx, sy;\r\n\r\ncx = cy = px = py = sx = sy = 0;\r\n\r\nconst parameters = {\r\n  A: 7,\r\n  a: 7,\r\n  C: 6,\r\n  c: 6,\r\n  H: 1,\r\n  h: 1,\r\n  L: 2,\r\n  l: 2,\r\n  M: 2,\r\n  m: 2,\r\n  Q: 4,\r\n  q: 4,\r\n  S: 4,\r\n  s: 4,\r\n  T: 2,\r\n  t: 2,\r\n  V: 1,\r\n  v: 1,\r\n  Z: 0,\r\n  z: 0\r\n};\r\n\r\nconst parse = function(path) {\r\n  let cmd;\r\n  const ret = [];\r\n  let args = [];\r\n  let curArg = '';\r\n  let foundDecimal = false;\r\n  let params = 0;\r\n\r\n  for (let c of path) {\r\n    if (parameters[c] != null) {\r\n      params = parameters[c];\r\n      if (cmd) {\r\n        // save existing command\r\n        if (curArg.length > 0) {\r\n          args[args.length] = +curArg;\r\n        }\r\n        ret[ret.length] = { cmd, args };\r\n\r\n        args = [];\r\n        curArg = '';\r\n        foundDecimal = false;\r\n      }\r\n\r\n      cmd = c;\r\n    } else if (\r\n      [' ', ','].includes(c) ||\r\n      (c === '-' && curArg.length > 0 && curArg[curArg.length - 1] !== 'e') ||\r\n      (c === '.' && foundDecimal)\r\n    ) {\r\n      if (curArg.length === 0) {\r\n        continue;\r\n      }\r\n\r\n      if (args.length === params) {\r\n        // handle reused commands\r\n        ret[ret.length] = { cmd, args };\r\n        args = [+curArg];\r\n\r\n        // handle assumed commands\r\n        if (cmd === 'M') {\r\n          cmd = 'L';\r\n        }\r\n        if (cmd === 'm') {\r\n          cmd = 'l';\r\n        }\r\n      } else {\r\n        args[args.length] = +curArg;\r\n      }\r\n\r\n      foundDecimal = c === '.';\r\n\r\n      // fix for negative numbers or repeated decimals with no delimeter between commands\r\n      curArg = ['-', '.'].includes(c) ? c : '';\r\n    } else {\r\n      curArg += c;\r\n      if (c === '.') {\r\n        foundDecimal = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  // add the last command\r\n  if (curArg.length > 0) {\r\n    if (args.length === params) {\r\n      // handle reused commands\r\n      ret[ret.length] = { cmd, args };\r\n      args = [+curArg];\r\n\r\n      // handle assumed commands\r\n      if (cmd === 'M') {\r\n        cmd = 'L';\r\n      }\r\n      if (cmd === 'm') {\r\n        cmd = 'l';\r\n      }\r\n    } else {\r\n      args[args.length] = +curArg;\r\n    }\r\n  }\r\n\r\n  ret[ret.length] = { cmd, args };\r\n\r\n  return ret;\r\n};\r\n\r\nconst apply = function(commands, doc) {\r\n  // current point, control point, and subpath starting point\r\n  cx = cy = px = py = sx = sy = 0;\r\n\r\n  // run the commands\r\n  for (let i = 0; i < commands.length; i++) {\r\n    const c = commands[i];\r\n    if (typeof runners[c.cmd] === 'function') {\r\n      runners[c.cmd](doc, c.args);\r\n    }\r\n  }\r\n};\r\n\r\nconst runners = {\r\n  M(doc, a) {\r\n    cx = a[0];\r\n    cy = a[1];\r\n    px = py = null;\r\n    sx = cx;\r\n    sy = cy;\r\n    return doc.moveTo(cx, cy);\r\n  },\r\n\r\n  m(doc, a) {\r\n    cx += a[0];\r\n    cy += a[1];\r\n    px = py = null;\r\n    sx = cx;\r\n    sy = cy;\r\n    return doc.moveTo(cx, cy);\r\n  },\r\n\r\n  C(doc, a) {\r\n    cx = a[4];\r\n    cy = a[5];\r\n    px = a[2];\r\n    py = a[3];\r\n    return doc.bezierCurveTo(...(a || []));\r\n  },\r\n\r\n  c(doc, a) {\r\n    doc.bezierCurveTo(\r\n      a[0] + cx,\r\n      a[1] + cy,\r\n      a[2] + cx,\r\n      a[3] + cy,\r\n      a[4] + cx,\r\n      a[5] + cy\r\n    );\r\n    px = cx + a[2];\r\n    py = cy + a[3];\r\n    cx += a[4];\r\n    return (cy += a[5]);\r\n  },\r\n\r\n  S(doc, a) {\r\n    if (px === null) {\r\n      px = cx;\r\n      py = cy;\r\n    }\r\n\r\n    doc.bezierCurveTo(cx - (px - cx), cy - (py - cy), a[0], a[1], a[2], a[3]);\r\n    px = a[0];\r\n    py = a[1];\r\n    cx = a[2];\r\n    return (cy = a[3]);\r\n  },\r\n\r\n  s(doc, a) {\r\n    if (px === null) {\r\n      px = cx;\r\n      py = cy;\r\n    }\r\n\r\n    doc.bezierCurveTo(\r\n      cx - (px - cx),\r\n      cy - (py - cy),\r\n      cx + a[0],\r\n      cy + a[1],\r\n      cx + a[2],\r\n      cy + a[3]\r\n    );\r\n    px = cx + a[0];\r\n    py = cy + a[1];\r\n    cx += a[2];\r\n    return (cy += a[3]);\r\n  },\r\n\r\n  Q(doc, a) {\r\n    px = a[0];\r\n    py = a[1];\r\n    cx = a[2];\r\n    cy = a[3];\r\n    return doc.quadraticCurveTo(a[0], a[1], cx, cy);\r\n  },\r\n\r\n  q(doc, a) {\r\n    doc.quadraticCurveTo(a[0] + cx, a[1] + cy, a[2] + cx, a[3] + cy);\r\n    px = cx + a[0];\r\n    py = cy + a[1];\r\n    cx += a[2];\r\n    return (cy += a[3]);\r\n  },\r\n\r\n  T(doc, a) {\r\n    if (px === null) {\r\n      px = cx;\r\n      py = cy;\r\n    } else {\r\n      px = cx - (px - cx);\r\n      py = cy - (py - cy);\r\n    }\r\n\r\n    doc.quadraticCurveTo(px, py, a[0], a[1]);\r\n    px = cx - (px - cx);\r\n    py = cy - (py - cy);\r\n    cx = a[0];\r\n    return (cy = a[1]);\r\n  },\r\n\r\n  t(doc, a) {\r\n    if (px === null) {\r\n      px = cx;\r\n      py = cy;\r\n    } else {\r\n      px = cx - (px - cx);\r\n      py = cy - (py - cy);\r\n    }\r\n\r\n    doc.quadraticCurveTo(px, py, cx + a[0], cy + a[1]);\r\n    cx += a[0];\r\n    return (cy += a[1]);\r\n  },\r\n\r\n  A(doc, a) {\r\n    solveArc(doc, cx, cy, a);\r\n    cx = a[5];\r\n    return (cy = a[6]);\r\n  },\r\n\r\n  a(doc, a) {\r\n    a[5] += cx;\r\n    a[6] += cy;\r\n    solveArc(doc, cx, cy, a);\r\n    cx = a[5];\r\n    return (cy = a[6]);\r\n  },\r\n\r\n  L(doc, a) {\r\n    cx = a[0];\r\n    cy = a[1];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  l(doc, a) {\r\n    cx += a[0];\r\n    cy += a[1];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  H(doc, a) {\r\n    cx = a[0];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  h(doc, a) {\r\n    cx += a[0];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  V(doc, a) {\r\n    cy = a[0];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  v(doc, a) {\r\n    cy += a[0];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  Z(doc) {\r\n    doc.closePath();\r\n    cx = sx;\r\n    return (cy = sy);\r\n  },\r\n\r\n  z(doc) {\r\n    doc.closePath();\r\n    cx = sx;\r\n    return (cy = sy);\r\n  }\r\n};\r\n\r\nconst solveArc = function(doc, x, y, coords) {\r\n  const [rx, ry, rot, large, sweep, ex, ey] = coords;\r\n  const segs = arcToSegments(ex, ey, rx, ry, large, sweep, rot, x, y);\r\n\r\n  for (let seg of segs) {\r\n    const bez = segmentToBezier(...(seg || []));\r\n    doc.bezierCurveTo(...(bez || []));\r\n  }\r\n};\r\n\r\n// from Inkscape svgtopdf, thanks!\r\nconst arcToSegments = function(x, y, rx, ry, large, sweep, rotateX, ox, oy) {\r\n  const th = rotateX * (Math.PI / 180);\r\n  const sin_th = Math.sin(th);\r\n  const cos_th = Math.cos(th);\r\n  rx = Math.abs(rx);\r\n  ry = Math.abs(ry);\r\n  px = cos_th * (ox - x) * 0.5 + sin_th * (oy - y) * 0.5;\r\n  py = cos_th * (oy - y) * 0.5 - sin_th * (ox - x) * 0.5;\r\n  let pl = (px * px) / (rx * rx) + (py * py) / (ry * ry);\r\n  if (pl > 1) {\r\n    pl = Math.sqrt(pl);\r\n    rx *= pl;\r\n    ry *= pl;\r\n  }\r\n\r\n  const a00 = cos_th / rx;\r\n  const a01 = sin_th / rx;\r\n  const a10 = -sin_th / ry;\r\n  const a11 = cos_th / ry;\r\n  const x0 = a00 * ox + a01 * oy;\r\n  const y0 = a10 * ox + a11 * oy;\r\n  const x1 = a00 * x + a01 * y;\r\n  const y1 = a10 * x + a11 * y;\r\n\r\n  const d = (x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0);\r\n  let sfactor_sq = 1 / d - 0.25;\r\n  if (sfactor_sq < 0) {\r\n    sfactor_sq = 0;\r\n  }\r\n  let sfactor = Math.sqrt(sfactor_sq);\r\n  if (sweep === large) {\r\n    sfactor = -sfactor;\r\n  }\r\n\r\n  const xc = 0.5 * (x0 + x1) - sfactor * (y1 - y0);\r\n  const yc = 0.5 * (y0 + y1) + sfactor * (x1 - x0);\r\n\r\n  const th0 = Math.atan2(y0 - yc, x0 - xc);\r\n  const th1 = Math.atan2(y1 - yc, x1 - xc);\r\n\r\n  let th_arc = th1 - th0;\r\n  if (th_arc < 0 && sweep === 1) {\r\n    th_arc += 2 * Math.PI;\r\n  } else if (th_arc > 0 && sweep === 0) {\r\n    th_arc -= 2 * Math.PI;\r\n  }\r\n\r\n  const segments = Math.ceil(Math.abs(th_arc / (Math.PI * 0.5 + 0.001)));\r\n  const result = [];\r\n\r\n  for (let i = 0; i < segments; i++) {\r\n    const th2 = th0 + (i * th_arc) / segments;\r\n    const th3 = th0 + ((i + 1) * th_arc) / segments;\r\n    result[i] = [xc, yc, th2, th3, rx, ry, sin_th, cos_th];\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nconst segmentToBezier = function(cx, cy, th0, th1, rx, ry, sin_th, cos_th) {\r\n  const a00 = cos_th * rx;\r\n  const a01 = -sin_th * ry;\r\n  const a10 = sin_th * rx;\r\n  const a11 = cos_th * ry;\r\n\r\n  const th_half = 0.5 * (th1 - th0);\r\n  const t =\r\n    ((8 / 3) * Math.sin(th_half * 0.5) * Math.sin(th_half * 0.5)) /\r\n    Math.sin(th_half);\r\n  const x1 = cx + Math.cos(th0) - t * Math.sin(th0);\r\n  const y1 = cy + Math.sin(th0) + t * Math.cos(th0);\r\n  const x3 = cx + Math.cos(th1);\r\n  const y3 = cy + Math.sin(th1);\r\n  const x2 = x3 + t * Math.sin(th1);\r\n  const y2 = y3 - t * Math.cos(th1);\r\n\r\n  return [\r\n    a00 * x1 + a01 * y1,\r\n    a10 * x1 + a11 * y1,\r\n    a00 * x2 + a01 * y2,\r\n    a10 * x2 + a11 * y2,\r\n    a00 * x3 + a01 * y3,\r\n    a10 * x3 + a11 * y3\r\n  ];\r\n};\r\n\r\nclass SVGPath {\r\n  static apply(doc, path) {\r\n    const commands = parse(path);\r\n    apply(commands, doc);\r\n  }\r\n}\r\n\r\nexport default SVGPath;\r\n","import SVGPath from '../path';\r\nimport PDFObject from '../object';\r\n\r\nconst { number } = PDFObject;\r\n\r\n// This constant is used to approximate a symmetrical arc using a cubic\r\n// Bezier curve.\r\nconst KAPPA = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\r\nexport default {\r\n  initVector() {\r\n    this._ctm = [1, 0, 0, 1, 0, 0]; // current transformation matrix\r\n    return (this._ctmStack = []);\r\n  },\r\n\r\n  save() {\r\n    this._ctmStack.push(this._ctm.slice());\r\n    // TODO: save/restore colorspace and styles so not setting it unnessesarily all the time?\r\n    return this.addContent('q');\r\n  },\r\n\r\n  restore() {\r\n    this._ctm = this._ctmStack.pop() || [1, 0, 0, 1, 0, 0];\r\n    return this.addContent('Q');\r\n  },\r\n\r\n  closePath() {\r\n    return this.addContent('h');\r\n  },\r\n\r\n  lineWidth(w) {\r\n    return this.addContent(`${number(w)} w`);\r\n  },\r\n\r\n  _CAP_STYLES: {\r\n    BUTT: 0,\r\n    ROUND: 1,\r\n    SQUARE: 2\r\n  },\r\n\r\n  lineCap(c) {\r\n    if (typeof c === 'string') {\r\n      c = this._CAP_STYLES[c.toUpperCase()];\r\n    }\r\n    return this.addContent(`${c} J`);\r\n  },\r\n\r\n  _JOIN_STYLES: {\r\n    MITER: 0,\r\n    ROUND: 1,\r\n    BEVEL: 2\r\n  },\r\n\r\n  lineJoin(j) {\r\n    if (typeof j === 'string') {\r\n      j = this._JOIN_STYLES[j.toUpperCase()];\r\n    }\r\n    return this.addContent(`${j} j`);\r\n  },\r\n\r\n  miterLimit(m) {\r\n    return this.addContent(`${number(m)} M`);\r\n  },\r\n\r\n  dash(length, options) {\r\n    let phase;\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (length == null) {\r\n      return this;\r\n    }\r\n    if (Array.isArray(length)) {\r\n      length = length.map(v => number(v)).join(' ');\r\n      phase = options.phase || 0;\r\n      return this.addContent(`[${length}] ${number(phase)} d`);\r\n    } else {\r\n      const space = options.space != null ? options.space : length;\r\n      phase = options.phase || 0;\r\n      return this.addContent(\r\n        `[${number(length)} ${number(space)}] ${number(phase)} d`\r\n      );\r\n    }\r\n  },\r\n\r\n  undash() {\r\n    return this.addContent('[] 0 d');\r\n  },\r\n\r\n  moveTo(x, y) {\r\n    return this.addContent(`${number(x)} ${number(y)} m`);\r\n  },\r\n\r\n  lineTo(x, y) {\r\n    return this.addContent(`${number(x)} ${number(y)} l`);\r\n  },\r\n\r\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n    return this.addContent(\r\n      `${number(cp1x)} ${number(cp1y)} ${number(cp2x)} ${number(cp2y)} ${number(\r\n        x\r\n      )} ${number(y)} c`\r\n    );\r\n  },\r\n\r\n  quadraticCurveTo(cpx, cpy, x, y) {\r\n    return this.addContent(\r\n      `${number(cpx)} ${number(cpy)} ${number(x)} ${number(y)} v`\r\n    );\r\n  },\r\n\r\n  rect(x, y, w, h) {\r\n    return this.addContent(\r\n      `${number(x)} ${number(y)} ${number(w)} ${number(h)} re`\r\n    );\r\n  },\r\n\r\n  roundedRect(x, y, w, h, r) {\r\n    if (r == null) {\r\n      r = 0;\r\n    }\r\n    r = Math.min(r, 0.5 * w, 0.5 * h);\r\n\r\n    // amount to inset control points from corners (see `ellipse`)\r\n    const c = r * (1.0 - KAPPA);\r\n\r\n    this.moveTo(x + r, y);\r\n    this.lineTo(x + w - r, y);\r\n    this.bezierCurveTo(x + w - c, y, x + w, y + c, x + w, y + r);\r\n    this.lineTo(x + w, y + h - r);\r\n    this.bezierCurveTo(x + w, y + h - c, x + w - c, y + h, x + w - r, y + h);\r\n    this.lineTo(x + r, y + h);\r\n    this.bezierCurveTo(x + c, y + h, x, y + h - c, x, y + h - r);\r\n    this.lineTo(x, y + r);\r\n    this.bezierCurveTo(x, y + c, x + c, y, x + r, y);\r\n    return this.closePath();\r\n  },\r\n\r\n  ellipse(x, y, r1, r2) {\r\n    // based on http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas/2173084#2173084\r\n    if (r2 == null) {\r\n      r2 = r1;\r\n    }\r\n    x -= r1;\r\n    y -= r2;\r\n    const ox = r1 * KAPPA;\r\n    const oy = r2 * KAPPA;\r\n    const xe = x + r1 * 2;\r\n    const ye = y + r2 * 2;\r\n    const xm = x + r1;\r\n    const ym = y + r2;\r\n\r\n    this.moveTo(x, ym);\r\n    this.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\r\n    this.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\r\n    this.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\r\n    this.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\r\n    return this.closePath();\r\n  },\r\n\r\n  circle(x, y, radius) {\r\n    return this.ellipse(x, y, radius);\r\n  },\r\n\r\n  arc(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n    if (anticlockwise == null) {\r\n      anticlockwise = false;\r\n    }\r\n    const TWO_PI = 2.0 * Math.PI;\r\n    const HALF_PI = 0.5 * Math.PI;\r\n\r\n    let deltaAng = endAngle - startAngle;\r\n\r\n    if (Math.abs(deltaAng) > TWO_PI) {\r\n      // draw only full circle if more than that is specified\r\n      deltaAng = TWO_PI;\r\n    } else if (deltaAng !== 0 && anticlockwise !== deltaAng < 0) {\r\n      // necessary to flip direction of rendering\r\n      const dir = anticlockwise ? -1 : 1;\r\n      deltaAng = dir * TWO_PI + deltaAng;\r\n    }\r\n\r\n    const numSegs = Math.ceil(Math.abs(deltaAng) / HALF_PI);\r\n    const segAng = deltaAng / numSegs;\r\n    const handleLen = (segAng / HALF_PI) * KAPPA * radius;\r\n    let curAng = startAngle;\r\n\r\n    // component distances between anchor point and control point\r\n    let deltaCx = -Math.sin(curAng) * handleLen;\r\n    let deltaCy = Math.cos(curAng) * handleLen;\r\n\r\n    // anchor point\r\n    let ax = x + Math.cos(curAng) * radius;\r\n    let ay = y + Math.sin(curAng) * radius;\r\n\r\n    // calculate and render segments\r\n    this.moveTo(ax, ay);\r\n\r\n    for (let segIdx = 0; segIdx < numSegs; segIdx++) {\r\n      // starting control point\r\n      const cp1x = ax + deltaCx;\r\n      const cp1y = ay + deltaCy;\r\n\r\n      // step angle\r\n      curAng += segAng;\r\n\r\n      // next anchor point\r\n      ax = x + Math.cos(curAng) * radius;\r\n      ay = y + Math.sin(curAng) * radius;\r\n\r\n      // next control point delta\r\n      deltaCx = -Math.sin(curAng) * handleLen;\r\n      deltaCy = Math.cos(curAng) * handleLen;\r\n\r\n      // ending control point\r\n      const cp2x = ax - deltaCx;\r\n      const cp2y = ay - deltaCy;\r\n\r\n      // render segment\r\n      this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, ax, ay);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  polygon(...points) {\r\n    this.moveTo(...(points.shift() || []));\r\n    for (let point of points) {\r\n      this.lineTo(...(point || []));\r\n    }\r\n    return this.closePath();\r\n  },\r\n\r\n  path(path) {\r\n    SVGPath.apply(this, path);\r\n    return this;\r\n  },\r\n\r\n  _windingRule(rule) {\r\n    if (/even-?odd/.test(rule)) {\r\n      return '*';\r\n    }\r\n\r\n    return '';\r\n  },\r\n\r\n  fill(color, rule) {\r\n    if (/(even-?odd)|(non-?zero)/.test(color)) {\r\n      rule = color;\r\n      color = null;\r\n    }\r\n\r\n    if (color) {\r\n      this.fillColor(color);\r\n    }\r\n    return this.addContent(`f${this._windingRule(rule)}`);\r\n  },\r\n\r\n  stroke(color) {\r\n    if (color) {\r\n      this.strokeColor(color);\r\n    }\r\n    return this.addContent('S');\r\n  },\r\n\r\n  fillAndStroke(fillColor, strokeColor, rule) {\r\n    if (strokeColor == null) {\r\n      strokeColor = fillColor;\r\n    }\r\n    const isFillRule = /(even-?odd)|(non-?zero)/;\r\n    if (isFillRule.test(fillColor)) {\r\n      rule = fillColor;\r\n      fillColor = null;\r\n    }\r\n\r\n    if (isFillRule.test(strokeColor)) {\r\n      rule = strokeColor;\r\n      strokeColor = fillColor;\r\n    }\r\n\r\n    if (fillColor) {\r\n      this.fillColor(fillColor);\r\n      this.strokeColor(strokeColor);\r\n    }\r\n\r\n    return this.addContent(`B${this._windingRule(rule)}`);\r\n  },\r\n\r\n  clip(rule) {\r\n    return this.addContent(`W${this._windingRule(rule)} n`);\r\n  },\r\n\r\n  transform(m11, m12, m21, m22, dx, dy) {\r\n    // keep track of the current transformation matrix\r\n    const m = this._ctm;\r\n    const [m0, m1, m2, m3, m4, m5] = m;\r\n    m[0] = m0 * m11 + m2 * m12;\r\n    m[1] = m1 * m11 + m3 * m12;\r\n    m[2] = m0 * m21 + m2 * m22;\r\n    m[3] = m1 * m21 + m3 * m22;\r\n    m[4] = m0 * dx + m2 * dy + m4;\r\n    m[5] = m1 * dx + m3 * dy + m5;\r\n\r\n    const values = [m11, m12, m21, m22, dx, dy].map(v => number(v)).join(' ');\r\n    return this.addContent(`${values} cm`);\r\n  },\r\n\r\n  translate(x, y) {\r\n    return this.transform(1, 0, 0, 1, x, y);\r\n  },\r\n\r\n  rotate(angle, options) {\r\n    let y;\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    const rad = (angle * Math.PI) / 180;\r\n    const cos = Math.cos(rad);\r\n    const sin = Math.sin(rad);\r\n    let x = (y = 0);\r\n\r\n    if (options.origin != null) {\r\n      [x, y] = options.origin;\r\n      const x1 = x * cos - y * sin;\r\n      const y1 = x * sin + y * cos;\r\n      x -= x1;\r\n      y -= y1;\r\n    }\r\n\r\n    return this.transform(cos, sin, -sin, cos, x, y);\r\n  },\r\n\r\n  scale(xFactor, yFactor, options) {\r\n    let y;\r\n    if (yFactor == null) {\r\n      yFactor = xFactor;\r\n    }\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (typeof yFactor === 'object') {\r\n      options = yFactor;\r\n      yFactor = xFactor;\r\n    }\r\n\r\n    let x = (y = 0);\r\n    if (options.origin != null) {\r\n      [x, y] = options.origin;\r\n      x -= xFactor * x;\r\n      y -= yFactor * y;\r\n    }\r\n\r\n    return this.transform(xFactor, 0, 0, yFactor, x, y);\r\n  }\r\n};\r\n","import fs from 'fs';\r\n\r\nconst WIN_ANSI_MAP = {\r\n  402: 131,\r\n  8211: 150,\r\n  8212: 151,\r\n  8216: 145,\r\n  8217: 146,\r\n  8218: 130,\r\n  8220: 147,\r\n  8221: 148,\r\n  8222: 132,\r\n  8224: 134,\r\n  8225: 135,\r\n  8226: 149,\r\n  8230: 133,\r\n  8364: 128,\r\n  8240: 137,\r\n  8249: 139,\r\n  8250: 155,\r\n  710: 136,\r\n  8482: 153,\r\n  338: 140,\r\n  339: 156,\r\n  732: 152,\r\n  352: 138,\r\n  353: 154,\r\n  376: 159,\r\n  381: 142,\r\n  382: 158\r\n};\r\n\r\nconst characters = `\\\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n  \r\nspace         exclam         quotedbl       numbersign\r\ndollar        percent        ampersand      quotesingle\r\nparenleft     parenright     asterisk       plus\r\ncomma         hyphen         period         slash\r\nzero          one            two            three\r\nfour          five           six            seven\r\neight         nine           colon          semicolon\r\nless          equal          greater        question\r\n  \r\nat            A              B              C\r\nD             E              F              G\r\nH             I              J              K\r\nL             M              N              O\r\nP             Q              R              S\r\nT             U              V              W\r\nX             Y              Z              bracketleft\r\nbackslash     bracketright   asciicircum    underscore\r\n  \r\ngrave         a              b              c\r\nd             e              f              g\r\nh             i              j              k\r\nl             m              n              o\r\np             q              r              s\r\nt             u              v              w\r\nx             y              z              braceleft\r\nbar           braceright     asciitilde     .notdef\r\n  \r\nEuro          .notdef        quotesinglbase florin\r\nquotedblbase  ellipsis       dagger         daggerdbl\r\ncircumflex    perthousand    Scaron         guilsinglleft\r\nOE            .notdef        Zcaron         .notdef\r\n.notdef       quoteleft      quoteright     quotedblleft\r\nquotedblright bullet         endash         emdash\r\ntilde         trademark      scaron         guilsinglright\r\noe            .notdef        zcaron         ydieresis\r\n  \r\nspace         exclamdown     cent           sterling\r\ncurrency      yen            brokenbar      section\r\ndieresis      copyright      ordfeminine    guillemotleft\r\nlogicalnot    hyphen         registered     macron\r\ndegree        plusminus      twosuperior    threesuperior\r\nacute         mu             paragraph      periodcentered\r\ncedilla       onesuperior    ordmasculine   guillemotright\r\nonequarter    onehalf        threequarters  questiondown\r\n  \r\nAgrave        Aacute         Acircumflex    Atilde\r\nAdieresis     Aring          AE             Ccedilla\r\nEgrave        Eacute         Ecircumflex    Edieresis\r\nIgrave        Iacute         Icircumflex    Idieresis\r\nEth           Ntilde         Ograve         Oacute\r\nOcircumflex   Otilde         Odieresis      multiply\r\nOslash        Ugrave         Uacute         Ucircumflex\r\nUdieresis     Yacute         Thorn          germandbls\r\n  \r\nagrave        aacute         acircumflex    atilde\r\nadieresis     aring          ae             ccedilla\r\negrave        eacute         ecircumflex    edieresis\r\nigrave        iacute         icircumflex    idieresis\r\neth           ntilde         ograve         oacute\r\nocircumflex   otilde         odieresis      divide\r\noslash        ugrave         uacute         ucircumflex\r\nudieresis     yacute         thorn          ydieresis\\\r\n`.split(/\\s+/);\r\n\r\nclass AFMFont {\r\n  static open(filename) {\r\n    return new AFMFont(fs.readFileSync(filename, 'utf8'));\r\n  }\r\n\r\n  constructor(contents) {\r\n    this.contents = contents;\r\n    this.attributes = {};\r\n    this.glyphWidths = {};\r\n    this.boundingBoxes = {};\r\n    this.kernPairs = {};\r\n\r\n    this.parse();\r\n    // todo: remove charWidths since appears to not be used\r\n    this.charWidths = new Array(256);\r\n    for (let char = 0; char <= 255; char++) {\r\n      this.charWidths[char] = this.glyphWidths[characters[char]];\r\n    }\r\n\r\n    this.bbox = this.attributes['FontBBox'].split(/\\s+/).map(e => +e);\r\n    this.ascender = +(this.attributes['Ascender'] || 0);\r\n    this.descender = +(this.attributes['Descender'] || 0);\r\n    this.xHeight = +(this.attributes['XHeight'] || 0);\r\n    this.capHeight = +(this.attributes['CapHeight'] || 0);\r\n    this.lineGap =\r\n      this.bbox[3] - this.bbox[1] - (this.ascender - this.descender);\r\n  }\r\n\r\n  parse() {\r\n    let section = '';\r\n    for (let line of this.contents.split('\\n')) {\r\n      var match;\r\n      var a;\r\n      if ((match = line.match(/^Start(\\w+)/))) {\r\n        section = match[1];\r\n        continue;\r\n      } else if ((match = line.match(/^End(\\w+)/))) {\r\n        section = '';\r\n        continue;\r\n      }\r\n\r\n      switch (section) {\r\n        case 'FontMetrics':\r\n          match = line.match(/(^\\w+)\\s+(.*)/);\r\n          var key = match[1];\r\n          var value = match[2];\r\n\r\n          if ((a = this.attributes[key])) {\r\n            if (!Array.isArray(a)) {\r\n              a = this.attributes[key] = [a];\r\n            }\r\n            a.push(value);\r\n          } else {\r\n            this.attributes[key] = value;\r\n          }\r\n          break;\r\n\r\n        case 'CharMetrics':\r\n          if (!/^CH?\\s/.test(line)) {\r\n            continue;\r\n          }\r\n          var name = line.match(/\\bN\\s+(\\.?\\w+)\\s*;/)[1];\r\n          this.glyphWidths[name] = +line.match(/\\bWX\\s+(\\d+)\\s*;/)[1];\r\n          break;\r\n\r\n        case 'KernPairs':\r\n          match = line.match(/^KPX\\s+(\\.?\\w+)\\s+(\\.?\\w+)\\s+(-?\\d+)/);\r\n          if (match) {\r\n            this.kernPairs[match[1] + '\\0' + match[2]] = parseInt(match[3]);\r\n          }\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  encodeText(text) {\r\n    const res = [];\r\n    for (let i = 0, len = text.length; i < len; i++) {\r\n      let char = text.charCodeAt(i);\r\n      char = WIN_ANSI_MAP[char] || char;\r\n      res.push(char.toString(16));\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  glyphsForString(string) {\r\n    const glyphs = [];\r\n\r\n    for (let i = 0, len = string.length; i < len; i++) {\r\n      const charCode = string.charCodeAt(i);\r\n      glyphs.push(this.characterToGlyph(charCode));\r\n    }\r\n\r\n    return glyphs;\r\n  }\r\n\r\n  characterToGlyph(character) {\r\n    return characters[WIN_ANSI_MAP[character] || character] || '.notdef';\r\n  }\r\n\r\n  widthOfGlyph(glyph) {\r\n    return this.glyphWidths[glyph] || 0;\r\n  }\r\n\r\n  getKernPair(left, right) {\r\n    return this.kernPairs[left + '\\0' + right] || 0;\r\n  }\r\n\r\n  advancesForGlyphs(glyphs) {\r\n    const advances = [];\r\n\r\n    for (let index = 0; index < glyphs.length; index++) {\r\n      const left = glyphs[index];\r\n      const right = glyphs[index + 1];\r\n      advances.push(this.widthOfGlyph(left) + this.getKernPair(left, right));\r\n    }\r\n\r\n    return advances;\r\n  }\r\n}\r\n\r\nexport default AFMFont;\r\n","class PDFFont {\r\n  constructor() {}\r\n\r\n  encode() {\r\n    throw new Error('Must be implemented by subclasses');\r\n  }\r\n\r\n  widthOfString() {\r\n    throw new Error('Must be implemented by subclasses');\r\n  }\r\n\r\n  ref() {\r\n    return this.dictionary != null\r\n      ? this.dictionary\r\n      : (this.dictionary = this.document.ref());\r\n  }\r\n\r\n  finalize() {\r\n    if (this.embedded || this.dictionary == null) {\r\n      return;\r\n    }\r\n\r\n    this.embed();\r\n    return (this.embedded = true);\r\n  }\r\n\r\n  embed() {\r\n    throw new Error('Must be implemented by subclasses');\r\n  }\r\n\r\n  lineHeight(size, includeGap) {\r\n    if (includeGap == null) {\r\n      includeGap = false;\r\n    }\r\n    const gap = includeGap ? this.lineGap : 0;\r\n    return ((this.ascender + gap - this.descender) / 1000) * size;\r\n  }\r\n}\r\n\r\nexport default PDFFont;\r\n","import AFMFont from './afm';\r\nimport PDFFont from '../font';\r\nimport fs from 'fs';\r\n\r\n// This insanity is so bundlers can inline the font files\r\nconst STANDARD_FONTS = {\r\n  Courier() {\r\n    return fs.readFileSync(__dirname + '/data/Courier.afm', 'utf8');\r\n  },\r\n  'Courier-Bold'() {\r\n    return fs.readFileSync(__dirname + '/data/Courier-Bold.afm', 'utf8');\r\n  },\r\n  'Courier-Oblique'() {\r\n    return fs.readFileSync(__dirname + '/data/Courier-Oblique.afm', 'utf8');\r\n  },\r\n  'Courier-BoldOblique'() {\r\n    return fs.readFileSync(__dirname + '/data/Courier-BoldOblique.afm', 'utf8');\r\n  },\r\n  Helvetica() {\r\n    return fs.readFileSync(__dirname + '/data/Helvetica.afm', 'utf8');\r\n  },\r\n  'Helvetica-Bold'() {\r\n    return fs.readFileSync(__dirname + '/data/Helvetica-Bold.afm', 'utf8');\r\n  },\r\n  'Helvetica-Oblique'() {\r\n    return fs.readFileSync(__dirname + '/data/Helvetica-Oblique.afm', 'utf8');\r\n  },\r\n  'Helvetica-BoldOblique'() {\r\n    return fs.readFileSync(\r\n      __dirname + '/data/Helvetica-BoldOblique.afm',\r\n      'utf8'\r\n    );\r\n  },\r\n  'Times-Roman'() {\r\n    return fs.readFileSync(__dirname + '/data/Times-Roman.afm', 'utf8');\r\n  },\r\n  'Times-Bold'() {\r\n    return fs.readFileSync(__dirname + '/data/Times-Bold.afm', 'utf8');\r\n  },\r\n  'Times-Italic'() {\r\n    return fs.readFileSync(__dirname + '/data/Times-Italic.afm', 'utf8');\r\n  },\r\n  'Times-BoldItalic'() {\r\n    return fs.readFileSync(__dirname + '/data/Times-BoldItalic.afm', 'utf8');\r\n  },\r\n  Symbol() {\r\n    return fs.readFileSync(__dirname + '/data/Symbol.afm', 'utf8');\r\n  },\r\n  ZapfDingbats() {\r\n    return fs.readFileSync(__dirname + '/data/ZapfDingbats.afm', 'utf8');\r\n  }\r\n};\r\n\r\nclass StandardFont extends PDFFont {\r\n  constructor(document, name, id) {\r\n    super();\r\n    this.document = document;\r\n    this.name = name;\r\n    this.id = id;\r\n    this.font = new AFMFont(STANDARD_FONTS[this.name]());\r\n    ({\r\n      ascender: this.ascender,\r\n      descender: this.descender,\r\n      bbox: this.bbox,\r\n      lineGap: this.lineGap,\r\n      xHeight: this.xHeight,\r\n      capHeight: this.capHeight\r\n    } = this.font);\r\n  }\r\n\r\n  embed() {\r\n    this.dictionary.data = {\r\n      Type: 'Font',\r\n      BaseFont: this.name,\r\n      Subtype: 'Type1',\r\n      Encoding: 'WinAnsiEncoding'\r\n    };\r\n\r\n    return this.dictionary.end();\r\n  }\r\n\r\n  encode(text) {\r\n    const encoded = this.font.encodeText(text);\r\n    const glyphs = this.font.glyphsForString(`${text}`);\r\n    const advances = this.font.advancesForGlyphs(glyphs);\r\n    const positions = [];\r\n    for (let i = 0; i < glyphs.length; i++) {\r\n      const glyph = glyphs[i];\r\n      positions.push({\r\n        xAdvance: advances[i],\r\n        yAdvance: 0,\r\n        xOffset: 0,\r\n        yOffset: 0,\r\n        advanceWidth: this.font.widthOfGlyph(glyph)\r\n      });\r\n    }\r\n\r\n    return [encoded, positions];\r\n  }\r\n\r\n  widthOfString(string, size) {\r\n    const glyphs = this.font.glyphsForString(`${string}`);\r\n    const advances = this.font.advancesForGlyphs(glyphs);\r\n\r\n    let width = 0;\r\n    for (let advance of advances) {\r\n      width += advance;\r\n    }\r\n\r\n    const scale = size / 1000;\r\n    return width * scale;\r\n  }\r\n\r\n  static isStandardFont(name) {\r\n    return name in STANDARD_FONTS;\r\n  }\r\n}\r\n\r\nexport default StandardFont;\r\n","import PDFFont from '../font';\r\n\r\nconst toHex = function(num) {\r\n  return `0000${num.toString(16)}`.slice(-4);\r\n};\r\n\r\nclass EmbeddedFont extends PDFFont {\r\n  constructor(document, font, id) {\r\n    super();\r\n    this.document = document;\r\n    this.font = font;\r\n    this.id = id;\r\n    this.subset = this.font.createSubset();\r\n    this.unicode = [[0]];\r\n    this.widths = [this.font.getGlyph(0).advanceWidth];\r\n\r\n    this.name = this.font.postscriptName;\r\n    this.scale = 1000 / this.font.unitsPerEm;\r\n    this.ascender = this.font.ascent * this.scale;\r\n    this.descender = this.font.descent * this.scale;\r\n    this.xHeight = this.font.xHeight * this.scale;\r\n    this.capHeight = this.font.capHeight * this.scale;\r\n    this.lineGap = this.font.lineGap * this.scale;\r\n    this.bbox = this.font.bbox;\r\n\r\n    if (document.options.fontLayoutCache !== false) {\r\n      this.layoutCache = Object.create(null);\r\n    }\r\n  }\r\n\r\n  layoutRun(text, features) {\r\n    const run = this.font.layout(text, features);\r\n\r\n    // Normalize position values\r\n    for (let i = 0; i < run.positions.length; i++) {\r\n      const position = run.positions[i];\r\n      for (let key in position) {\r\n        position[key] *= this.scale;\r\n      }\r\n\r\n      position.advanceWidth = run.glyphs[i].advanceWidth * this.scale;\r\n    }\r\n\r\n    return run;\r\n  }\r\n\r\n  layoutCached(text) {\r\n    if (!this.layoutCache) {\r\n      return this.layoutRun(text);\r\n    }\r\n    let cached;\r\n    if ((cached = this.layoutCache[text])) {\r\n      return cached;\r\n    }\r\n\r\n    const run = this.layoutRun(text);\r\n    this.layoutCache[text] = run;\r\n    return run;\r\n  }\r\n\r\n  layout(text, features, onlyWidth) {\r\n    // Skip the cache if any user defined features are applied\r\n    if (features) {\r\n      return this.layoutRun(text, features);\r\n    }\r\n\r\n    let glyphs = onlyWidth ? null : [];\r\n    let positions = onlyWidth ? null : [];\r\n    let advanceWidth = 0;\r\n\r\n    // Split the string by words to increase cache efficiency.\r\n    // For this purpose, spaces and tabs are a good enough delimeter.\r\n    let last = 0;\r\n    let index = 0;\r\n    while (index <= text.length) {\r\n      var needle;\r\n      if (\r\n        (index === text.length && last < index) ||\r\n        ((needle = text.charAt(index)), [' ', '\\t'].includes(needle))\r\n      ) {\r\n        const run = this.layoutCached(text.slice(last, ++index));\r\n        if (!onlyWidth) {\r\n          glyphs = glyphs.concat(run.glyphs);\r\n          positions = positions.concat(run.positions);\r\n        }\r\n\r\n        advanceWidth += run.advanceWidth;\r\n        last = index;\r\n      } else {\r\n        index++;\r\n      }\r\n    }\r\n\r\n    return { glyphs, positions, advanceWidth };\r\n  }\r\n\r\n  encode(text, features) {\r\n    const { glyphs, positions } = this.layout(text, features);\r\n\r\n    const res = [];\r\n    for (let i = 0; i < glyphs.length; i++) {\r\n      const glyph = glyphs[i];\r\n      const gid = this.subset.includeGlyph(glyph.id);\r\n      res.push(`0000${gid.toString(16)}`.slice(-4));\r\n\r\n      if (this.widths[gid] == null) {\r\n        this.widths[gid] = glyph.advanceWidth * this.scale;\r\n      }\r\n      if (this.unicode[gid] == null) {\r\n        this.unicode[gid] = glyph.codePoints;\r\n      }\r\n    }\r\n\r\n    return [res, positions];\r\n  }\r\n\r\n  widthOfString(string, size, features) {\r\n    const width = this.layout(string, features, true).advanceWidth;\r\n    const scale = size / 1000;\r\n    return width * scale;\r\n  }\r\n\r\n  embed() {\r\n    const isCFF = this.subset.cff != null;\r\n    const fontFile = this.document.ref();\r\n\r\n    if (isCFF) {\r\n      fontFile.data.Subtype = 'CIDFontType0C';\r\n    }\r\n\r\n    this.subset\r\n      .encodeStream()\r\n      .on('data', data => fontFile.write(data))\r\n      .on('end', () => fontFile.end());\r\n\r\n    const familyClass =\r\n      ((this.font['OS/2'] != null\r\n        ? this.font['OS/2'].sFamilyClass\r\n        : undefined) || 0) >> 8;\r\n    let flags = 0;\r\n    if (this.font.post.isFixedPitch) {\r\n      flags |= 1 << 0;\r\n    }\r\n    if (1 <= familyClass && familyClass <= 7) {\r\n      flags |= 1 << 1;\r\n    }\r\n    flags |= 1 << 2; // assume the font uses non-latin characters\r\n    if (familyClass === 10) {\r\n      flags |= 1 << 3;\r\n    }\r\n    if (this.font.head.macStyle.italic) {\r\n      flags |= 1 << 6;\r\n    }\r\n\r\n    // generate a tag (6 uppercase letters. 16 is the char code offset from '1' to 'A'. 74 will map to 'Z')\r\n    const tag = [1, 2, 3, 4, 5, 6]\r\n      .map(i => String.fromCharCode((this.id.charCodeAt(i) || 74) + 16))\r\n      .join('');\r\n    const name = tag + '+' + this.font.postscriptName;\r\n\r\n    const { bbox } = this.font;\r\n    const descriptor = this.document.ref({\r\n      Type: 'FontDescriptor',\r\n      FontName: name,\r\n      Flags: flags,\r\n      FontBBox: [\r\n        bbox.minX * this.scale,\r\n        bbox.minY * this.scale,\r\n        bbox.maxX * this.scale,\r\n        bbox.maxY * this.scale\r\n      ],\r\n      ItalicAngle: this.font.italicAngle,\r\n      Ascent: this.ascender,\r\n      Descent: this.descender,\r\n      CapHeight: (this.font.capHeight || this.font.ascent) * this.scale,\r\n      XHeight: (this.font.xHeight || 0) * this.scale,\r\n      StemV: 0\r\n    }); // not sure how to calculate this\r\n\r\n    if (isCFF) {\r\n      descriptor.data.FontFile3 = fontFile;\r\n    } else {\r\n      descriptor.data.FontFile2 = fontFile;\r\n    }\r\n\r\n    descriptor.end();\r\n\r\n    const descendantFont = this.document.ref({\r\n      Type: 'Font',\r\n      Subtype: isCFF ? 'CIDFontType0' : 'CIDFontType2',\r\n      BaseFont: name,\r\n      CIDSystemInfo: {\r\n        Registry: new String('Adobe'),\r\n        Ordering: new String('Identity'),\r\n        Supplement: 0\r\n      },\r\n      FontDescriptor: descriptor,\r\n      W: [0, this.widths]\r\n    });\r\n\r\n    descendantFont.end();\r\n\r\n    this.dictionary.data = {\r\n      Type: 'Font',\r\n      Subtype: 'Type0',\r\n      BaseFont: name,\r\n      Encoding: 'Identity-H',\r\n      DescendantFonts: [descendantFont],\r\n      ToUnicode: this.toUnicodeCmap()\r\n    };\r\n\r\n    return this.dictionary.end();\r\n  }\r\n\r\n  // Maps the glyph ids encoded in the PDF back to unicode strings\r\n  // Because of ligature substitutions and the like, there may be one or more\r\n  // unicode characters represented by each glyph.\r\n  toUnicodeCmap() {\r\n    const cmap = this.document.ref();\r\n\r\n    const entries = [];\r\n    for (let codePoints of this.unicode) {\r\n      const encoded = [];\r\n\r\n      // encode codePoints to utf16\r\n      for (let value of codePoints) {\r\n        if (value > 0xffff) {\r\n          value -= 0x10000;\r\n          encoded.push(toHex(((value >>> 10) & 0x3ff) | 0xd800));\r\n          value = 0xdc00 | (value & 0x3ff);\r\n        }\r\n\r\n        encoded.push(toHex(value));\r\n      }\r\n\r\n      entries.push(`<${encoded.join(' ')}>`);\r\n    }\r\n\r\n    cmap.end(`\\\r\n/CIDInit /ProcSet findresource begin\r\n12 dict begin\r\nbegincmap\r\n/CIDSystemInfo <<\r\n  /Registry (Adobe)\r\n  /Ordering (UCS)\r\n  /Supplement 0\r\n>> def\r\n/CMapName /Adobe-Identity-UCS def\r\n/CMapType 2 def\r\n1 begincodespacerange\r\n<0000><ffff>\r\nendcodespacerange\r\n1 beginbfrange\r\n<0000> <${toHex(entries.length - 1)}> [${entries.join(' ')}]\r\nendbfrange\r\nendcmap\r\nCMapName currentdict /CMap defineresource pop\r\nend\r\nend\\\r\n`);\r\n\r\n    return cmap;\r\n  }\r\n}\r\n\r\nexport default EmbeddedFont;\r\n","import fs from 'fs';\r\nimport fontkit from 'fontkit';\r\nimport StandardFont from './font/standard';\r\nimport EmbeddedFont from './font/embedded';\r\n\r\nclass PDFFontFactory {\r\n  static open(document, src, family, id) {\r\n    let font;\r\n    if (typeof src === 'string') {\r\n      if (StandardFont.isStandardFont(src)) {\r\n        return new StandardFont(document, src, id);\r\n      }\r\n\r\n      src = fs.readFileSync(src);\r\n    }\r\n    if (Buffer.isBuffer(src)) {\r\n      font = fontkit.create(src, family);\r\n    } else if (src instanceof Uint8Array) {\r\n      font = fontkit.create(new Buffer(src), family);\r\n    } else if (src instanceof ArrayBuffer) {\r\n      font = fontkit.create(new Buffer(new Uint8Array(src)), family);\r\n    }\r\n\r\n    if (font == null) {\r\n      throw new Error('Not a supported font format or standard PDF font.');\r\n    }\r\n\r\n    return new EmbeddedFont(document, font, id);\r\n  }\r\n}\r\n\r\nexport default PDFFontFactory;\r\n","import PDFFontFactory from '../font_factory';\r\n\r\nexport default {\r\n  initFonts(defaultFont = 'Helvetica') {\r\n    // Lookup table for embedded fonts\r\n    this._fontFamilies = {};\r\n    this._fontCount = 0;\r\n\r\n    // Font state\r\n    this._fontSize = 12;\r\n    this._font = null;\r\n\r\n    this._registeredFonts = {};\r\n\r\n    // Set the default font\r\n    if (defaultFont) {\r\n      this.font(defaultFont);\r\n    }\r\n  },\r\n\r\n  font(src, family, size) {\r\n    let cacheKey, font;\r\n    if (typeof family === 'number') {\r\n      size = family;\r\n      family = null;\r\n    }\r\n\r\n    // check registered fonts if src is a string\r\n    if (typeof src === 'string' && this._registeredFonts[src]) {\r\n      cacheKey = src;\r\n      ({ src, family } = this._registeredFonts[src]);\r\n    } else {\r\n      cacheKey = family || src;\r\n      if (typeof cacheKey !== 'string') {\r\n        cacheKey = null;\r\n      }\r\n    }\r\n\r\n    if (size != null) {\r\n      this.fontSize(size);\r\n    }\r\n\r\n    // fast path: check if the font is already in the PDF\r\n    if ((font = this._fontFamilies[cacheKey])) {\r\n      this._font = font;\r\n      return this;\r\n    }\r\n\r\n    // load the font\r\n    const id = `F${++this._fontCount}`;\r\n    this._font = PDFFontFactory.open(this, src, family, id);\r\n\r\n    // check for existing font familes with the same name already in the PDF\r\n    // useful if the font was passed as a buffer\r\n    if ((font = this._fontFamilies[this._font.name])) {\r\n      this._font = font;\r\n      return this;\r\n    }\r\n\r\n    // save the font for reuse later\r\n    if (cacheKey) {\r\n      this._fontFamilies[cacheKey] = this._font;\r\n    }\r\n\r\n    if (this._font.name) {\r\n      this._fontFamilies[this._font.name] = this._font;\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  fontSize(_fontSize) {\r\n    this._fontSize = _fontSize;\r\n    return this;\r\n  },\r\n\r\n  currentLineHeight(includeGap) {\r\n    if (includeGap == null) {\r\n      includeGap = false;\r\n    }\r\n    return this._font.lineHeight(this._fontSize, includeGap);\r\n  },\r\n\r\n  registerFont(name, src, family) {\r\n    this._registeredFonts[name] = {\r\n      src,\r\n      family\r\n    };\r\n\r\n    return this;\r\n  }\r\n};\r\n","import { EventEmitter } from 'events';\r\nimport LineBreaker from 'linebreak';\r\n\r\nclass LineWrapper extends EventEmitter {\r\n  constructor(document, options) {\r\n    super();\r\n    this.document = document;\r\n    this.indent = options.indent || 0;\r\n    this.characterSpacing = options.characterSpacing || 0;\r\n    this.wordSpacing = options.wordSpacing === 0;\r\n    this.columns = options.columns || 1;\r\n    this.columnGap = options.columnGap != null ? options.columnGap : 18; // 1/4 inch\r\n    this.lineWidth =\r\n      (options.width - this.columnGap * (this.columns - 1)) / this.columns;\r\n    this.spaceLeft = this.lineWidth;\r\n    this.startX = this.document.x;\r\n    this.startY = this.document.y;\r\n    this.column = 1;\r\n    this.ellipsis = options.ellipsis;\r\n    this.continuedX = 0;\r\n    this.features = options.features;\r\n\r\n    // calculate the maximum Y position the text can appear at\r\n    if (options.height != null) {\r\n      this.height = options.height;\r\n      this.maxY = this.startY + options.height;\r\n    } else {\r\n      this.maxY = this.document.page.maxY();\r\n    }\r\n\r\n    // handle paragraph indents\r\n    this.on('firstLine', options => {\r\n      // if this is the first line of the text segment, and\r\n      // we're continuing where we left off, indent that much\r\n      // otherwise use the user specified indent option\r\n      const indent = this.continuedX || this.indent;\r\n      this.document.x += indent;\r\n      this.lineWidth -= indent;\r\n\r\n      return this.once('line', () => {\r\n        this.document.x -= indent;\r\n        this.lineWidth += indent;\r\n        if (options.continued && !this.continuedX) {\r\n          this.continuedX = this.indent;\r\n        }\r\n        if (!options.continued) {\r\n          return (this.continuedX = 0);\r\n        }\r\n      });\r\n    });\r\n\r\n    // handle left aligning last lines of paragraphs\r\n    this.on('lastLine', options => {\r\n      const { align } = options;\r\n      if (align === 'justify') {\r\n        options.align = 'left';\r\n      }\r\n      this.lastLine = true;\r\n\r\n      return this.once('line', () => {\r\n        this.document.y += options.paragraphGap || 0;\r\n        options.align = align;\r\n        return (this.lastLine = false);\r\n      });\r\n    });\r\n  }\r\n\r\n  wordWidth(word) {\r\n    return (\r\n      this.document.widthOfString(word, this) +\r\n      this.characterSpacing +\r\n      this.wordSpacing\r\n    );\r\n  }\r\n\r\n  eachWord(text, fn) {\r\n    // setup a unicode line breaker\r\n    let bk;\r\n    const breaker = new LineBreaker(text);\r\n    let last = null;\r\n    const wordWidths = Object.create(null);\r\n\r\n    while ((bk = breaker.nextBreak())) {\r\n      var shouldContinue;\r\n      let word = text.slice(\r\n        (last != null ? last.position : undefined) || 0,\r\n        bk.position\r\n      );\r\n      let w =\r\n        wordWidths[word] != null\r\n          ? wordWidths[word]\r\n          : (wordWidths[word] = this.wordWidth(word));\r\n\r\n      // if the word is longer than the whole line, chop it up\r\n      // TODO: break by grapheme clusters, not JS string characters\r\n      if (w > this.lineWidth + this.continuedX) {\r\n        // make some fake break objects\r\n        let lbk = last;\r\n        const fbk = {};\r\n\r\n        while (word.length) {\r\n          // fit as much of the word as possible into the space we have\r\n          var l, mightGrow;\r\n          if (w > this.spaceLeft) {\r\n            // start our check at the end of our available space - this method is faster than a loop of each character and it resolves\r\n            // an issue with long loops when processing massive words, such as a huge number of spaces\r\n            l = Math.ceil(this.spaceLeft / (w / word.length));\r\n            w = this.wordWidth(word.slice(0, l));\r\n            mightGrow = w <= this.spaceLeft && l < word.length;\r\n          } else {\r\n            l = word.length;\r\n          }\r\n          let mustShrink = w > this.spaceLeft && l > 0;\r\n          // shrink or grow word as necessary after our near-guess above\r\n          while (mustShrink || mightGrow) {\r\n            if (mustShrink) {\r\n              w = this.wordWidth(word.slice(0, --l));\r\n              mustShrink = w > this.spaceLeft && l > 0;\r\n            } else {\r\n              w = this.wordWidth(word.slice(0, ++l));\r\n              mustShrink = w > this.spaceLeft && l > 0;\r\n              mightGrow = w <= this.spaceLeft && l < word.length;\r\n            }\r\n          }\r\n\r\n          // send a required break unless this is the last piece and a linebreak is not specified\r\n          fbk.required = bk.required || l < word.length;\r\n          shouldContinue = fn(word.slice(0, l), w, fbk, lbk);\r\n          lbk = { required: false };\r\n\r\n          // get the remaining piece of the word\r\n          word = word.slice(l);\r\n          w = this.wordWidth(word);\r\n\r\n          if (shouldContinue === false) {\r\n            break;\r\n          }\r\n        }\r\n      } else {\r\n        // otherwise just emit the break as it was given to us\r\n        shouldContinue = fn(word, w, bk, last);\r\n      }\r\n\r\n      if (shouldContinue === false) {\r\n        break;\r\n      }\r\n      last = bk;\r\n    }\r\n  }\r\n\r\n  wrap(text, options) {\r\n    // override options from previous continued fragments\r\n    if (options.indent != null) {\r\n      this.indent = options.indent;\r\n    }\r\n    if (options.characterSpacing != null) {\r\n      this.characterSpacing = options.characterSpacing;\r\n    }\r\n    if (options.wordSpacing != null) {\r\n      this.wordSpacing = options.wordSpacing;\r\n    }\r\n    if (options.ellipsis != null) {\r\n      this.ellipsis = options.ellipsis;\r\n    }\r\n\r\n    // make sure we're actually on the page\r\n    // and that the first line of is never by\r\n    // itself at the bottom of a page (orphans)\r\n    const nextY = this.document.y + this.document.currentLineHeight(true);\r\n    if (this.document.y > this.maxY || nextY > this.maxY) {\r\n      this.nextSection();\r\n    }\r\n\r\n    let buffer = '';\r\n    let textWidth = 0;\r\n    let wc = 0;\r\n    let lc = 0;\r\n\r\n    let { y } = this.document; // used to reset Y pos if options.continued (below)\r\n    const emitLine = () => {\r\n      options.textWidth = textWidth + this.wordSpacing * (wc - 1);\r\n      options.wordCount = wc;\r\n      options.lineWidth = this.lineWidth;\r\n      ({ y } = this.document);\r\n      this.emit('line', buffer, options, this);\r\n      return lc++;\r\n    };\r\n\r\n    this.emit('sectionStart', options, this);\r\n\r\n    this.eachWord(text, (word, w, bk, last) => {\r\n      if (last == null || last.required) {\r\n        this.emit('firstLine', options, this);\r\n        this.spaceLeft = this.lineWidth;\r\n      }\r\n\r\n      if (w <= this.spaceLeft) {\r\n        buffer += word;\r\n        textWidth += w;\r\n        wc++;\r\n      }\r\n\r\n      if (bk.required || w > this.spaceLeft) {\r\n        // if the user specified a max height and an ellipsis, and is about to pass the\r\n        // max height and max columns after the next line, append the ellipsis\r\n        const lh = this.document.currentLineHeight(true);\r\n        if (\r\n          this.height != null &&\r\n          this.ellipsis &&\r\n          this.document.y + lh * 2 > this.maxY &&\r\n          this.column >= this.columns\r\n        ) {\r\n          if (this.ellipsis === true) {\r\n            this.ellipsis = '…';\r\n          } // map default ellipsis character\r\n          buffer = buffer.replace(/\\s+$/, '');\r\n          textWidth = this.wordWidth(buffer + this.ellipsis);\r\n\r\n          // remove characters from the buffer until the ellipsis fits\r\n          // to avoid inifinite loop need to stop while-loop if buffer is empty string\r\n          while (buffer && textWidth > this.lineWidth) {\r\n            buffer = buffer.slice(0, -1).replace(/\\s+$/, '');\r\n            textWidth = this.wordWidth(buffer + this.ellipsis);\r\n          }\r\n          // need to add ellipsis only if there is enough space for it\r\n          if (textWidth <= this.lineWidth) {\r\n            buffer = buffer + this.ellipsis;\r\n          }\r\n\r\n          textWidth = this.wordWidth(buffer);\r\n        }\r\n\r\n        if (bk.required) {\r\n          if (w > this.spaceLeft) {\r\n            emitLine();\r\n            buffer = word;\r\n            textWidth = w;\r\n            wc = 1;\r\n          }\r\n\r\n          this.emit('lastLine', options, this);\r\n        }\r\n\r\n        emitLine();\r\n\r\n        // if we've reached the edge of the page,\r\n        // continue on a new page or column\r\n        if (this.document.y + lh > this.maxY) {\r\n          const shouldContinue = this.nextSection();\r\n\r\n          // stop if we reached the maximum height\r\n          if (!shouldContinue) {\r\n            wc = 0;\r\n            buffer = '';\r\n            return false;\r\n          }\r\n        }\r\n\r\n        // reset the space left and buffer\r\n        if (bk.required) {\r\n          this.spaceLeft = this.lineWidth;\r\n          buffer = '';\r\n          textWidth = 0;\r\n          return (wc = 0);\r\n        } else {\r\n          // reset the space left and buffer\r\n          this.spaceLeft = this.lineWidth - w;\r\n          buffer = word;\r\n          textWidth = w;\r\n          return (wc = 1);\r\n        }\r\n      } else {\r\n        return (this.spaceLeft -= w);\r\n      }\r\n    });\r\n\r\n    if (wc > 0) {\r\n      this.emit('lastLine', options, this);\r\n      emitLine();\r\n    }\r\n\r\n    this.emit('sectionEnd', options, this);\r\n\r\n    // if the wrap is set to be continued, save the X position\r\n    // to start the first line of the next segment at, and reset\r\n    // the y position\r\n    if (options.continued === true) {\r\n      if (lc > 1) {\r\n        this.continuedX = 0;\r\n      }\r\n      this.continuedX += options.textWidth || 0;\r\n      return (this.document.y = y);\r\n    } else {\r\n      return (this.document.x = this.startX);\r\n    }\r\n  }\r\n\r\n  nextSection(options) {\r\n    this.emit('sectionEnd', options, this);\r\n\r\n    if (++this.column > this.columns) {\r\n      // if a max height was specified by the user, we're done.\r\n      // otherwise, the default is to make a new page at the bottom.\r\n      if (this.height != null) {\r\n        return false;\r\n      }\r\n\r\n      this.document.addPage();\r\n      this.column = 1;\r\n      this.startY = this.document.page.margins.top;\r\n      this.maxY = this.document.page.maxY();\r\n      this.document.x = this.startX;\r\n      if (this.document._fillColor) {\r\n        this.document.fillColor(...(this.document._fillColor || []));\r\n      }\r\n      this.emit('pageBreak', options, this);\r\n    } else {\r\n      this.document.x += this.lineWidth + this.columnGap;\r\n      this.document.y = this.startY;\r\n      this.emit('columnBreak', options, this);\r\n    }\r\n\r\n    this.emit('sectionStart', options, this);\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default LineWrapper;\r\n","import LineWrapper from '../line_wrapper';\r\nimport PDFObject from '../object';\r\n\r\nconst { number } = PDFObject;\r\n\r\nexport default {\r\n  initText() {\r\n    this._line = this._line.bind(this);\r\n    // Current coordinates\r\n    this.x = 0;\r\n    this.y = 0;\r\n    return (this._lineGap = 0);\r\n  },\r\n\r\n  lineGap(_lineGap) {\r\n    this._lineGap = _lineGap;\r\n    return this;\r\n  },\r\n\r\n  moveDown(lines) {\r\n    if (lines == null) {\r\n      lines = 1;\r\n    }\r\n    this.y += this.currentLineHeight(true) * lines + this._lineGap;\r\n    return this;\r\n  },\r\n\r\n  moveUp(lines) {\r\n    if (lines == null) {\r\n      lines = 1;\r\n    }\r\n    this.y -= this.currentLineHeight(true) * lines + this._lineGap;\r\n    return this;\r\n  },\r\n\r\n  _text(text, x, y, options, lineCallback) {\r\n    options = this._initOptions(x, y, options);\r\n\r\n    // Convert text to a string\r\n    text = text == null ? '' : `${text}`;\r\n\r\n    // if the wordSpacing option is specified, remove multiple consecutive spaces\r\n    if (options.wordSpacing) {\r\n      text = text.replace(/\\s{2,}/g, ' ');\r\n    }\r\n\r\n    // word wrapping\r\n    if (options.width) {\r\n      let wrapper = this._wrapper;\r\n      if (!wrapper) {\r\n        wrapper = new LineWrapper(this, options);\r\n        wrapper.on('line', lineCallback);\r\n      }\r\n\r\n      this._wrapper = options.continued ? wrapper : null;\r\n      this._textOptions = options.continued ? options : null;\r\n      wrapper.wrap(text, options);\r\n\r\n      // render paragraphs as single lines\r\n    } else {\r\n      for (let line of text.split('\\n')) {\r\n        lineCallback(line, options);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  text(text, x, y, options) {\r\n    return this._text(text, x, y, options, this._line);\r\n  },\r\n\r\n  widthOfString(string, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    return (\r\n      this._font.widthOfString(string, this._fontSize, options.features) +\r\n      (options.characterSpacing || 0) * (string.length - 1)\r\n    );\r\n  },\r\n\r\n  heightOfString(text, options) {\r\n    const { x, y } = this;\r\n\r\n    options = this._initOptions(options);\r\n    options.height = Infinity; // don't break pages\r\n\r\n    const lineGap = options.lineGap || this._lineGap || 0;\r\n    this._text(text, this.x, this.y, options, () => {\r\n      return (this.y += this.currentLineHeight(true) + lineGap);\r\n    });\r\n\r\n    const height = this.y - y;\r\n    this.x = x;\r\n    this.y = y;\r\n\r\n    return height;\r\n  },\r\n\r\n  list(list, x, y, options, wrapper) {\r\n    options = this._initOptions(x, y, options);\r\n\r\n    const listType = options.listType || 'bullet';\r\n    const unit = Math.round((this._font.ascender / 1000) * this._fontSize);\r\n    const midLine = unit / 2;\r\n    const r = options.bulletRadius || unit / 3;\r\n    const indent =\r\n      options.textIndent || (listType === 'bullet' ? r * 5 : unit * 2);\r\n    const itemIndent =\r\n      options.bulletIndent || (listType === 'bullet' ? r * 8 : unit * 2);\r\n\r\n    let level = 1;\r\n    const items = [];\r\n    const levels = [];\r\n    const numbers = [];\r\n\r\n    var flatten = function(list) {\r\n      let n = 1;\r\n      for (let i = 0; i < list.length; i++) {\r\n        const item = list[i];\r\n        if (Array.isArray(item)) {\r\n          level++;\r\n          flatten(item);\r\n          level--;\r\n        } else {\r\n          items.push(item);\r\n          levels.push(level);\r\n          if (listType !== 'bullet') {\r\n            numbers.push(n++);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    flatten(list);\r\n\r\n    const label = function(n) {\r\n      switch (listType) {\r\n        case 'numbered':\r\n          return `${n}.`;\r\n        case 'lettered':\r\n          var letter = String.fromCharCode(((n - 1) % 26) + 65);\r\n          var times = Math.floor((n - 1) / 26 + 1);\r\n          var text = Array(times + 1).join(letter);\r\n          return `${text}.`;\r\n      }\r\n    };\r\n\r\n    wrapper = new LineWrapper(this, options);\r\n    wrapper.on('line', this._line);\r\n\r\n    level = 1;\r\n    let i = 0;\r\n    wrapper.on('firstLine', () => {\r\n      let l;\r\n      if ((l = levels[i++]) !== level) {\r\n        const diff = itemIndent * (l - level);\r\n        this.x += diff;\r\n        wrapper.lineWidth -= diff;\r\n        level = l;\r\n      }\r\n\r\n      switch (listType) {\r\n        case 'bullet':\r\n          this.circle(this.x - indent + r, this.y + midLine, r);\r\n          return this.fill();\r\n        case 'numbered':\r\n        case 'lettered':\r\n          var text = label(numbers[i - 1]);\r\n          return this._fragment(text, this.x - indent, this.y, options);\r\n      }\r\n    });\r\n\r\n    wrapper.on('sectionStart', () => {\r\n      const pos = indent + itemIndent * (level - 1);\r\n      this.x += pos;\r\n      return (wrapper.lineWidth -= pos);\r\n    });\r\n\r\n    wrapper.on('sectionEnd', () => {\r\n      const pos = indent + itemIndent * (level - 1);\r\n      this.x -= pos;\r\n      return (wrapper.lineWidth += pos);\r\n    });\r\n\r\n    wrapper.wrap(items.join('\\n'), options);\r\n\r\n    return this;\r\n  },\r\n\r\n  _initOptions(x, y, options) {\r\n    if (x == null) {\r\n      x = {};\r\n    }\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (typeof x === 'object') {\r\n      options = x;\r\n      x = null;\r\n    }\r\n\r\n    // clone options object\r\n    const result = Object.assign({}, options);\r\n\r\n    // extend options with previous values for continued text\r\n    if (this._textOptions) {\r\n      for (let key in this._textOptions) {\r\n        const val = this._textOptions[key];\r\n        if (key !== 'continued') {\r\n          if (result[key] == null) {\r\n            result[key] = val;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update the current position\r\n    if (x != null) {\r\n      this.x = x;\r\n    }\r\n    if (y != null) {\r\n      this.y = y;\r\n    }\r\n\r\n    // wrap to margins if no x or y position passed\r\n    if (result.lineBreak !== false) {\r\n      if (result.width == null) {\r\n        result.width = this.page.width - this.x - this.page.margins.right;\r\n      }\r\n    }\r\n\r\n    if (!result.columns) {\r\n      result.columns = 0;\r\n    }\r\n    if (result.columnGap == null) {\r\n      result.columnGap = 18;\r\n    } // 1/4 inch\r\n\r\n    return result;\r\n  },\r\n\r\n  _line(text, options, wrapper) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    this._fragment(text, this.x, this.y, options);\r\n    const lineGap = options.lineGap || this._lineGap || 0;\r\n\r\n    if (!wrapper) {\r\n      return (this.x += this.widthOfString(text));\r\n    } else {\r\n      return (this.y += this.currentLineHeight(true) + lineGap);\r\n    }\r\n  },\r\n\r\n  _fragment(text, x, y, options) {\r\n    let dy, encoded, i, positions, textWidth, words;\r\n    text = `${text}`.replace(/\\n/g, '');\r\n    if (text.length === 0) {\r\n      return;\r\n    }\r\n\r\n    // handle options\r\n    const align = options.align || 'left';\r\n    let wordSpacing = options.wordSpacing || 0;\r\n    const characterSpacing = options.characterSpacing || 0;\r\n\r\n    // text alignments\r\n    if (options.width) {\r\n      switch (align) {\r\n        case 'right':\r\n          textWidth = this.widthOfString(text.replace(/\\s+$/, ''), options);\r\n          x += options.lineWidth - textWidth;\r\n          break;\r\n\r\n        case 'center':\r\n          x += options.lineWidth / 2 - options.textWidth / 2;\r\n          break;\r\n\r\n        case 'justify':\r\n          // calculate the word spacing value\r\n          words = text.trim().split(/\\s+/);\r\n          textWidth = this.widthOfString(text.replace(/\\s+/g, ''), options);\r\n          var spaceWidth = this.widthOfString(' ') + characterSpacing;\r\n          wordSpacing = Math.max(\r\n            0,\r\n            (options.lineWidth - textWidth) / Math.max(1, words.length - 1) -\r\n              spaceWidth\r\n          );\r\n          break;\r\n      }\r\n    }\r\n\r\n    // text baseline alignments based on http://wiki.apache.org/xmlgraphics-fop/LineLayout/AlignmentHandling\r\n    if (typeof options.baseline === 'number') {\r\n      dy = -options.baseline;\r\n    } else {\r\n      switch (options.baseline) {\r\n        case 'svg-middle':\r\n          dy = 0.5 * this._font.xHeight;\r\n          break;\r\n        case 'middle':\r\n        case 'svg-central':\r\n          dy = 0.5 * (this._font.descender + this._font.ascender);\r\n          break;\r\n        case 'bottom':\r\n        case 'ideographic':\r\n          dy = this._font.descender;\r\n          break;\r\n        case 'alphabetic':\r\n          dy = 0;\r\n          break;\r\n        case 'mathematical':\r\n          dy = 0.5 * this._font.ascender;\r\n          break;\r\n        case 'hanging':\r\n          dy = 0.8 * this._font.ascender;\r\n          break;\r\n        case 'top':\r\n          dy = this._font.ascender;\r\n          break;\r\n        default:\r\n          dy = this._font.ascender;\r\n      }\r\n      dy = (dy / 1000) * this._fontSize;\r\n    }\r\n\r\n    // calculate the actual rendered width of the string after word and character spacing\r\n    const renderedWidth =\r\n      options.textWidth +\r\n      wordSpacing * (options.wordCount - 1) +\r\n      characterSpacing * (text.length - 1);\r\n\r\n    // create link annotations if the link option is given\r\n    if (options.link != null) {\r\n      this.link(x, y, renderedWidth, this.currentLineHeight(), options.link);\r\n    }\r\n\r\n    // create underline or strikethrough line\r\n    if (options.underline || options.strike) {\r\n      this.save();\r\n      if (!options.stroke) {\r\n        this.strokeColor(...(this._fillColor || []));\r\n      }\r\n\r\n      const lineWidth =\r\n        this._fontSize < 10 ? 0.5 : Math.floor(this._fontSize / 10);\r\n      this.lineWidth(lineWidth);\r\n\r\n      const d = options.underline ? 1 : 2;\r\n      let lineY = y + this.currentLineHeight() / d;\r\n      if (options.underline) {\r\n        lineY -= lineWidth;\r\n      }\r\n\r\n      this.moveTo(x, lineY);\r\n      this.lineTo(x + renderedWidth, lineY);\r\n      this.stroke();\r\n      this.restore();\r\n    }\r\n\r\n    this.save();\r\n\r\n    // oblique (angle in degrees or boolean)\r\n    if (options.oblique) {\r\n      let skew;\r\n      if (typeof options.oblique === 'number') {\r\n        skew = -Math.tan((options.oblique * Math.PI) / 180);\r\n      } else {\r\n        skew = -0.25;\r\n      }\r\n      this.transform(1, 0, 0, 1, x, y);\r\n      this.transform(1, 0, skew, 1, -skew * dy, 0);\r\n      this.transform(1, 0, 0, 1, -x, -y);\r\n    }\r\n\r\n    // flip coordinate system\r\n    this.transform(1, 0, 0, -1, 0, this.page.height);\r\n    y = this.page.height - y - dy;\r\n\r\n    // add current font to page if necessary\r\n    if (this.page.fonts[this._font.id] == null) {\r\n      this.page.fonts[this._font.id] = this._font.ref();\r\n    }\r\n\r\n    // begin the text object\r\n    this.addContent('BT');\r\n\r\n    // text position\r\n    this.addContent(`1 0 0 1 ${number(x)} ${number(y)} Tm`);\r\n\r\n    // font and font size\r\n    this.addContent(`/${this._font.id} ${number(this._fontSize)} Tf`);\r\n\r\n    // rendering mode\r\n    const mode = options.fill && options.stroke ? 2 : options.stroke ? 1 : 0;\r\n    if (mode) {\r\n      this.addContent(`${mode} Tr`);\r\n    }\r\n\r\n    // Character spacing\r\n    if (characterSpacing) {\r\n      this.addContent(`${number(characterSpacing)} Tc`);\r\n    }\r\n\r\n    // Add the actual text\r\n    // If we have a word spacing value, we need to encode each word separately\r\n    // since the normal Tw operator only works on character code 32, which isn't\r\n    // used for embedded fonts.\r\n    if (wordSpacing) {\r\n      words = text.trim().split(/\\s+/);\r\n      wordSpacing += this.widthOfString(' ') + characterSpacing;\r\n      wordSpacing *= 1000 / this._fontSize;\r\n\r\n      encoded = [];\r\n      positions = [];\r\n      for (let word of words) {\r\n        const [encodedWord, positionsWord] = this._font.encode(\r\n          word,\r\n          options.features\r\n        );\r\n        encoded = encoded.concat(encodedWord);\r\n        positions = positions.concat(positionsWord);\r\n\r\n        // add the word spacing to the end of the word\r\n        // clone object because of cache\r\n        const space = {};\r\n        const object = positions[positions.length - 1];\r\n        for (let key in object) {\r\n          const val = object[key];\r\n          space[key] = val;\r\n        }\r\n        space.xAdvance += wordSpacing;\r\n        positions[positions.length - 1] = space;\r\n      }\r\n    } else {\r\n      [encoded, positions] = this._font.encode(text, options.features);\r\n    }\r\n\r\n    const scale = this._fontSize / 1000;\r\n    const commands = [];\r\n    let last = 0;\r\n    let hadOffset = false;\r\n\r\n    // Adds a segment of text to the TJ command buffer\r\n    const addSegment = cur => {\r\n      if (last < cur) {\r\n        const hex = encoded.slice(last, cur).join('');\r\n        const advance =\r\n          positions[cur - 1].xAdvance - positions[cur - 1].advanceWidth;\r\n        commands.push(`<${hex}> ${number(-advance)}`);\r\n      }\r\n\r\n      return (last = cur);\r\n    };\r\n\r\n    // Flushes the current TJ commands to the output stream\r\n    const flush = i => {\r\n      addSegment(i);\r\n\r\n      if (commands.length > 0) {\r\n        this.addContent(`[${commands.join(' ')}] TJ`);\r\n        return (commands.length = 0);\r\n      }\r\n    };\r\n\r\n    for (i = 0; i < positions.length; i++) {\r\n      // If we have an x or y offset, we have to break out of the current TJ command\r\n      // so we can move the text position.\r\n      const pos = positions[i];\r\n      if (pos.xOffset || pos.yOffset) {\r\n        // Flush the current buffer\r\n        flush(i);\r\n\r\n        // Move the text position and flush just the current character\r\n        this.addContent(\r\n          `1 0 0 1 ${number(x + pos.xOffset * scale)} ${number(\r\n            y + pos.yOffset * scale\r\n          )} Tm`\r\n        );\r\n        flush(i + 1);\r\n\r\n        hadOffset = true;\r\n      } else {\r\n        // If the last character had an offset, reset the text position\r\n        if (hadOffset) {\r\n          this.addContent(`1 0 0 1 ${number(x)} ${number(y)} Tm`);\r\n          hadOffset = false;\r\n        }\r\n\r\n        // Group segments that don't have any advance adjustments\r\n        if (pos.xAdvance - pos.advanceWidth !== 0) {\r\n          addSegment(i + 1);\r\n        }\r\n      }\r\n\r\n      x += pos.xAdvance * scale;\r\n    }\r\n\r\n    // Flush any remaining commands\r\n    flush(i);\r\n\r\n    // end the text object\r\n    this.addContent('ET');\r\n\r\n    // restore flipped coordinate system\r\n    return this.restore();\r\n  }\r\n};\r\n","const MARKERS = [\r\n  0xffc0,\r\n  0xffc1,\r\n  0xffc2,\r\n  0xffc3,\r\n  0xffc5,\r\n  0xffc6,\r\n  0xffc7,\r\n  0xffc8,\r\n  0xffc9,\r\n  0xffca,\r\n  0xffcb,\r\n  0xffcc,\r\n  0xffcd,\r\n  0xffce,\r\n  0xffcf\r\n];\r\n\r\nconst COLOR_SPACE_MAP = {\r\n  1: 'DeviceGray',\r\n  3: 'DeviceRGB',\r\n  4: 'DeviceCMYK'\r\n};\r\n\r\nclass JPEG {\r\n  constructor(data, label) {\r\n    let marker;\r\n    this.data = data;\r\n    this.label = label;\r\n    if (this.data.readUInt16BE(0) !== 0xffd8) {\r\n      throw 'SOI not found in JPEG';\r\n    }\r\n\r\n    let pos = 2;\r\n    while (pos < this.data.length) {\r\n      marker = this.data.readUInt16BE(pos);\r\n      pos += 2;\r\n      if (MARKERS.includes(marker)) {\r\n        break;\r\n      }\r\n      pos += this.data.readUInt16BE(pos);\r\n    }\r\n\r\n    if (!MARKERS.includes(marker)) {\r\n      throw 'Invalid JPEG.';\r\n    }\r\n    pos += 2;\r\n\r\n    this.bits = this.data[pos++];\r\n    this.height = this.data.readUInt16BE(pos);\r\n    pos += 2;\r\n\r\n    this.width = this.data.readUInt16BE(pos);\r\n    pos += 2;\r\n\r\n    const channels = this.data[pos++];\r\n    this.colorSpace = COLOR_SPACE_MAP[channels];\r\n\r\n    this.obj = null;\r\n  }\r\n\r\n  embed(document) {\r\n    if (this.obj) {\r\n      return;\r\n    }\r\n\r\n    this.obj = document.ref({\r\n      Type: 'XObject',\r\n      Subtype: 'Image',\r\n      BitsPerComponent: this.bits,\r\n      Width: this.width,\r\n      Height: this.height,\r\n      ColorSpace: this.colorSpace,\r\n      Filter: 'DCTDecode'\r\n    });\r\n\r\n    // add extra decode params for CMYK images. By swapping the\r\n    // min and max values from the default, we invert the colors. See\r\n    // section 4.8.4 of the spec.\r\n    if (this.colorSpace === 'DeviceCMYK') {\r\n      this.obj.data['Decode'] = [1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 1.0, 0.0];\r\n    }\r\n\r\n    this.obj.end(this.data);\r\n\r\n    // free memory\r\n    return (this.data = null);\r\n  }\r\n}\r\n\r\nexport default JPEG;\r\n","import zlib from 'zlib';\r\nimport PNG from 'png-js';\r\n\r\nclass PNGImage {\r\n  constructor(data, label) {\r\n    this.label = label;\r\n    this.image = new PNG(data);\r\n    this.width = this.image.width;\r\n    this.height = this.image.height;\r\n    this.imgData = this.image.imgData;\r\n    this.obj = null;\r\n  }\r\n\r\n  embed(document) {\r\n    this.document = document;\r\n    if (this.obj) {\r\n      return;\r\n    }\r\n\r\n    const hasAlphaChannel = this.image.hasAlphaChannel;\r\n\r\n    this.obj = this.document.ref({\r\n      Type: 'XObject',\r\n      Subtype: 'Image',\r\n      BitsPerComponent: hasAlphaChannel ? 8 : this.image.bits,\r\n      Width: this.width,\r\n      Height: this.height,\r\n      Filter: 'FlateDecode'\r\n    });\r\n\r\n    if (!hasAlphaChannel) {\r\n      const params = this.document.ref({\r\n        Predictor: 15,\r\n        Colors: this.image.colors,\r\n        BitsPerComponent: this.image.bits,\r\n        Columns: this.width\r\n      });\r\n\r\n      this.obj.data['DecodeParms'] = params;\r\n      params.end();\r\n    }\r\n\r\n    if (this.image.palette.length === 0) {\r\n      this.obj.data['ColorSpace'] = this.image.colorSpace;\r\n    } else {\r\n      // embed the color palette in the PDF as an object stream\r\n      const palette = this.document.ref();\r\n      palette.end(new Buffer(this.image.palette));\r\n\r\n      // build the color space array for the image\r\n      this.obj.data['ColorSpace'] = [\r\n        'Indexed',\r\n        'DeviceRGB',\r\n        this.image.palette.length / 3 - 1,\r\n        palette\r\n      ];\r\n    }\r\n\r\n    // For PNG color types 0, 2 and 3, the transparency data is stored in\r\n    // a dedicated PNG chunk.\r\n    if (this.image.transparency.grayscale != null) {\r\n      // Use Color Key Masking (spec section 4.8.5)\r\n      // An array with N elements, where N is two times the number of color components.\r\n      const val = this.image.transparency.grayscale;\r\n      this.obj.data['Mask'] = [val, val];\r\n    } else if (this.image.transparency.rgb) {\r\n      // Use Color Key Masking (spec section 4.8.5)\r\n      // An array with N elements, where N is two times the number of color components.\r\n      const { rgb } = this.image.transparency;\r\n      const mask = [];\r\n      for (let x of rgb) {\r\n        mask.push(x, x);\r\n      }\r\n\r\n      this.obj.data['Mask'] = mask;\r\n    } else if (this.image.transparency.indexed) {\r\n      // Create a transparency SMask for the image based on the data\r\n      // in the PLTE and tRNS sections. See below for details on SMasks.\r\n      return this.loadIndexedAlphaChannel();\r\n    } else if (hasAlphaChannel) {\r\n      // For PNG color types 4 and 6, the transparency data is stored as a alpha\r\n      // channel mixed in with the main image data. Separate this data out into an\r\n      // SMask object and store it separately in the PDF.\r\n      return this.splitAlphaChannel();\r\n    }\r\n    this.finalize();\r\n  }\r\n\r\n  finalize() {\r\n    if (this.alphaChannel) {\r\n      const sMask = this.document.ref({\r\n        Type: 'XObject',\r\n        Subtype: 'Image',\r\n        Height: this.height,\r\n        Width: this.width,\r\n        BitsPerComponent: 8,\r\n        Filter: 'FlateDecode',\r\n        ColorSpace: 'DeviceGray',\r\n        Decode: [0, 1]\r\n      });\r\n\r\n      sMask.end(this.alphaChannel);\r\n      this.obj.data['SMask'] = sMask;\r\n    }\r\n\r\n    // add the actual image data\r\n    this.obj.end(this.imgData);\r\n\r\n    // free memory\r\n    this.image = null;\r\n    return (this.imgData = null);\r\n  }\r\n\r\n  splitAlphaChannel() {\r\n    return this.image.decodePixels(pixels => {\r\n      let a, p;\r\n      const colorCount = this.image.colors;\r\n      const pixelCount = this.width * this.height;\r\n      const imgData = new Buffer(pixelCount * colorCount);\r\n      const alphaChannel = new Buffer(pixelCount);\r\n\r\n      let i = (p = a = 0);\r\n      const len = pixels.length;\r\n      // For 16bit images copy only most significant byte (MSB) - PNG data is always stored in network byte order (MSB first)\r\n      const skipByteCount = this.image.bits === 16 ? 1 : 0;\r\n      while (i < len) {\r\n        for (let colorIndex = 0; colorIndex < colorCount; colorIndex++) {\r\n          imgData[p++] = pixels[i++];\r\n          i += skipByteCount;\r\n        }\r\n        alphaChannel[a++] = pixels[i++];\r\n        i += skipByteCount;\r\n      }\r\n\r\n      this.imgData = zlib.deflateSync(imgData);\r\n      this.alphaChannel = zlib.deflateSync(alphaChannel);\r\n      return this.finalize();\r\n    });\r\n  }\r\n\r\n  loadIndexedAlphaChannel() {\r\n    const transparency = this.image.transparency.indexed;\r\n    return this.image.decodePixels(pixels => {\r\n      const alphaChannel = new Buffer(this.width * this.height);\r\n\r\n      let i = 0;\r\n      for (let j = 0, end = pixels.length; j < end; j++) {\r\n        alphaChannel[i++] = transparency[pixels[j]];\r\n      }\r\n\r\n      this.alphaChannel = zlib.deflateSync(alphaChannel);\r\n      return this.finalize();\r\n    });\r\n  }\r\n}\r\n\r\nexport default PNGImage;\r\n","/*\r\nPDFImage - embeds images in PDF documents\r\nBy Devon Govett\r\n*/\r\n\r\nimport fs from 'fs';\r\nimport JPEG from './image/jpeg';\r\nimport PNG from './image/png';\r\n\r\nclass PDFImage {\r\n  static open(src, label) {\r\n    let data;\r\n    if (Buffer.isBuffer(src)) {\r\n      data = src;\r\n    } else if (src instanceof ArrayBuffer) {\r\n      data = new Buffer(new Uint8Array(src));\r\n    } else {\r\n      let match;\r\n      if ((match = /^data:.+;base64,(.*)$/.exec(src))) {\r\n        data = new Buffer(match[1], 'base64');\r\n      } else {\r\n        data = fs.readFileSync(src);\r\n        if (!data) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (data[0] === 0xff && data[1] === 0xd8) {\r\n      return new JPEG(data, label);\r\n    } else if (data[0] === 0x89 && data.toString('ascii', 1, 4) === 'PNG') {\r\n      return new PNG(data, label);\r\n    } else {\r\n      throw new Error('Unknown image format.');\r\n    }\r\n  }\r\n}\r\n\r\nexport default PDFImage;\r\n","import PDFImage from '../image';\r\n\r\nexport default {\r\n  initImages() {\r\n    this._imageRegistry = {};\r\n    return (this._imageCount = 0);\r\n  },\r\n\r\n  image(src, x, y, options) {\r\n    let bh, bp, bw, image, ip, left, left1;\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    if (typeof x === 'object') {\r\n      options = x;\r\n      x = null;\r\n    }\r\n\r\n    x = (left = x != null ? x : options.x) != null ? left : this.x;\r\n    y = (left1 = y != null ? y : options.y) != null ? left1 : this.y;\r\n\r\n    if (typeof src === 'string') {\r\n      image = this._imageRegistry[src];\r\n    }\r\n\r\n    if (!image) {\r\n      if (src.width && src.height) {\r\n        image = src;\r\n      } else {\r\n        image = this.openImage(src);\r\n      }\r\n    }\r\n\r\n    if (!image.obj) {\r\n      image.embed(this);\r\n    }\r\n\r\n    if (this.page.xobjects[image.label] == null) {\r\n      this.page.xobjects[image.label] = image.obj;\r\n    }\r\n\r\n    let w = options.width || image.width;\r\n    let h = options.height || image.height;\r\n\r\n    if (options.width && !options.height) {\r\n      const wp = w / image.width;\r\n      w = image.width * wp;\r\n      h = image.height * wp;\r\n    } else if (options.height && !options.width) {\r\n      const hp = h / image.height;\r\n      w = image.width * hp;\r\n      h = image.height * hp;\r\n    } else if (options.scale) {\r\n      w = image.width * options.scale;\r\n      h = image.height * options.scale;\r\n    } else if (options.fit) {\r\n      [bw, bh] = options.fit;\r\n      bp = bw / bh;\r\n      ip = image.width / image.height;\r\n      if (ip > bp) {\r\n        w = bw;\r\n        h = bw / ip;\r\n      } else {\r\n        h = bh;\r\n        w = bh * ip;\r\n      }\r\n    } else if (options.cover) {\r\n      [bw, bh] = options.cover;\r\n      bp = bw / bh;\r\n      ip = image.width / image.height;\r\n      if (ip > bp) {\r\n        h = bh;\r\n        w = bh * ip;\r\n      } else {\r\n        w = bw;\r\n        h = bw / ip;\r\n      }\r\n    }\r\n\r\n    if (options.fit || options.cover) {\r\n      if (options.align === 'center') {\r\n        x = x + bw / 2 - w / 2;\r\n      } else if (options.align === 'right') {\r\n        x = x + bw - w;\r\n      }\r\n\r\n      if (options.valign === 'center') {\r\n        y = y + bh / 2 - h / 2;\r\n      } else if (options.valign === 'bottom') {\r\n        y = y + bh - h;\r\n      }\r\n    }\r\n\r\n    // Set the current y position to below the image if it is in the document flow\r\n    if (this.y === y) {\r\n      this.y += h;\r\n    }\r\n\r\n    this.save();\r\n    this.transform(w, 0, 0, -h, x, y + h);\r\n    this.addContent(`/${image.label} Do`);\r\n    this.restore();\r\n\r\n    return this;\r\n  },\r\n\r\n  openImage(src) {\r\n    let image;\r\n    if (typeof src === 'string') {\r\n      image = this._imageRegistry[src];\r\n    }\r\n\r\n    if (!image) {\r\n      image = PDFImage.open(src, `I${++this._imageCount}`);\r\n      if (typeof src === 'string') {\r\n        this._imageRegistry[src] = image;\r\n      }\r\n    }\r\n\r\n    return image;\r\n  }\r\n};\r\n","export default {\r\n  annotate(x, y, w, h, options) {\r\n    options.Type = 'Annot';\r\n    options.Rect = this._convertRect(x, y, w, h);\r\n    options.Border = [0, 0, 0];\r\n    if (options.Subtype !== 'Link') {\r\n      if (options.C == null) {\r\n        options.C = this._normalizeColor(options.color || [0, 0, 0]);\r\n      }\r\n    } // convert colors\r\n    delete options.color;\r\n\r\n    if (typeof options.Dest === 'string') {\r\n      options.Dest = new String(options.Dest);\r\n    }\r\n\r\n    // Capitalize keys\r\n    for (let key in options) {\r\n      const val = options[key];\r\n      options[key[0].toUpperCase() + key.slice(1)] = val;\r\n    }\r\n\r\n    const ref = this.ref(options);\r\n    this.page.annotations.push(ref);\r\n    ref.end();\r\n    return this;\r\n  },\r\n\r\n  note(x, y, w, h, contents, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    options.Subtype = 'Text';\r\n    options.Contents = new String(contents);\r\n    options.Name = 'Comment';\r\n    if (options.color == null) {\r\n      options.color = [243, 223, 92];\r\n    }\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  link(x, y, w, h, url, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    options.Subtype = 'Link';\r\n\r\n    if (typeof url === 'number') {\r\n      // Link to a page in the document (the page must already exist)\r\n      const pages = this._root.data.Pages.data;\r\n      if (url >= 0 && url < pages.Kids.length) {\r\n        options.A = this.ref({\r\n          S: 'GoTo',\r\n          D: [pages.Kids[url], 'XYZ', null, null, null]\r\n        });\r\n        options.A.end();\r\n      } else {\r\n        throw new Error(`The document has no page ${url}`);\r\n      }\r\n    } else {\r\n      // Link to an external url\r\n      options.A = this.ref({\r\n        S: 'URI',\r\n        URI: new String(url)\r\n      });\r\n      options.A.end();\r\n    }\r\n\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  _markup(x, y, w, h, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    const [x1, y1, x2, y2] = this._convertRect(x, y, w, h);\r\n    options.QuadPoints = [x1, y2, x2, y2, x1, y1, x2, y1];\r\n    options.Contents = new String();\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  highlight(x, y, w, h, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    options.Subtype = 'Highlight';\r\n    if (options.color == null) {\r\n      options.color = [241, 238, 148];\r\n    }\r\n    return this._markup(x, y, w, h, options);\r\n  },\r\n\r\n  underline(x, y, w, h, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    options.Subtype = 'Underline';\r\n    return this._markup(x, y, w, h, options);\r\n  },\r\n\r\n  strike(x, y, w, h, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    options.Subtype = 'StrikeOut';\r\n    return this._markup(x, y, w, h, options);\r\n  },\r\n\r\n  lineAnnotation(x1, y1, x2, y2, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    options.Subtype = 'Line';\r\n    options.Contents = new String();\r\n    options.L = [x1, this.page.height - y1, x2, this.page.height - y2];\r\n    return this.annotate(x1, y1, x2, y2, options);\r\n  },\r\n\r\n  rectAnnotation(x, y, w, h, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    options.Subtype = 'Square';\r\n    options.Contents = new String();\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  ellipseAnnotation(x, y, w, h, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    options.Subtype = 'Circle';\r\n    options.Contents = new String();\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  textAnnotation(x, y, w, h, text, options) {\r\n    if (options == null) {\r\n      options = {};\r\n    }\r\n    options.Subtype = 'FreeText';\r\n    options.Contents = new String(text);\r\n    options.DA = new String();\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  _convertRect(x1, y1, w, h) {\r\n    // flip y1 and y2\r\n    let y2 = y1;\r\n    y1 += h;\r\n\r\n    // make x2\r\n    let x2 = x1 + w;\r\n\r\n    // apply current transformation matrix to points\r\n    const [m0, m1, m2, m3, m4, m5] = this._ctm;\r\n    x1 = m0 * x1 + m2 * y1 + m4;\r\n    y1 = m1 * x1 + m3 * y1 + m5;\r\n    x2 = m0 * x2 + m2 * y2 + m4;\r\n    y2 = m1 * x2 + m3 * y2 + m5;\r\n\r\n    return [x1, y1, x2, y2];\r\n  }\r\n};\r\n","class PDFOutline {\r\n  constructor(document, parent, title, dest, options) {\r\n    this.document = document;\r\n    if (options == null) {\r\n      options = { expanded: false };\r\n    }\r\n    this.options = options;\r\n    this.outlineData = {};\r\n\r\n    if (dest !== null) {\r\n      this.outlineData['Dest'] = [dest.dictionary, 'Fit'];\r\n    }\r\n\r\n    if (parent !== null) {\r\n      this.outlineData['Parent'] = parent;\r\n    }\r\n\r\n    if (title !== null) {\r\n      this.outlineData['Title'] = new String(title);\r\n    }\r\n\r\n    this.dictionary = this.document.ref(this.outlineData);\r\n    this.children = [];\r\n  }\r\n\r\n  addItem(title, options) {\r\n    if (options == null) {\r\n      options = { expanded: false };\r\n    }\r\n    const result = new PDFOutline(\r\n      this.document,\r\n      this.dictionary,\r\n      title,\r\n      this.document.page,\r\n      options\r\n    );\r\n    this.children.push(result);\r\n\r\n    return result;\r\n  }\r\n\r\n  endOutline() {\r\n    if (this.children.length > 0) {\r\n      if (this.options.expanded) {\r\n        this.outlineData.Count = this.children.length;\r\n      }\r\n\r\n      const first = this.children[0],\r\n        last = this.children[this.children.length - 1];\r\n      this.outlineData.First = first.dictionary;\r\n      this.outlineData.Last = last.dictionary;\r\n\r\n      for (let i = 0, len = this.children.length; i < len; i++) {\r\n        const child = this.children[i];\r\n        if (i > 0) {\r\n          child.outlineData.Prev = this.children[i - 1].dictionary;\r\n        }\r\n        if (i < this.children.length - 1) {\r\n          child.outlineData.Next = this.children[i + 1].dictionary;\r\n        }\r\n        child.endOutline();\r\n      }\r\n    }\r\n\r\n    return this.dictionary.end();\r\n  }\r\n}\r\n\r\nexport default PDFOutline;\r\n","import PDFOutline from '../outline';\r\n\r\nexport default {\r\n  initOutline() {\r\n    return (this.outline = new PDFOutline(this, null, null, null));\r\n  },\r\n\r\n  endOutline() {\r\n    this.outline.endOutline();\r\n    if (this.outline.children.length > 0) {\r\n      this._root.data.Outlines = this.outline.dictionary;\r\n      return (this._root.data.PageMode = 'UseOutlines');\r\n    }\r\n  }\r\n};\r\n","/*\r\nPDFDocument - represents an entire PDF document\r\nBy Devon Govett\r\n*/\r\n\r\nimport stream from 'stream';\r\nimport fs from 'fs';\r\nimport PDFObject from './object';\r\nimport PDFReference from './reference';\r\nimport PDFPage from './page';\r\nimport PDFSecurity from './security';\r\nimport ColorMixin from './mixins/color';\r\nimport VectorMixin from './mixins/vector';\r\nimport FontsMixin from './mixins/fonts';\r\nimport TextMixin from './mixins/text';\r\nimport ImagesMixin from './mixins/images';\r\nimport AnnotationsMixin from './mixins/annotations';\r\nimport OutlineMixin from './mixins/outline';\r\n\r\nclass PDFDocument extends stream.Readable {\r\n  constructor(options = {}) {\r\n    super(options);\r\n    this.options = options;\r\n\r\n    // PDF version\r\n    switch (options.pdfVersion) {\r\n      case '1.4':\r\n        this.version = 1.4;\r\n        break;\r\n      case '1.5':\r\n        this.version = 1.5;\r\n        break;\r\n      case '1.6':\r\n        this.version = 1.6;\r\n        break;\r\n      case '1.7':\r\n      case '1.7ext3':\r\n        this.version = 1.7;\r\n        break;\r\n      default:\r\n        this.version = 1.3;\r\n        break;\r\n    }\r\n\r\n    // Whether streams should be compressed\r\n    this.compress =\r\n      this.options.compress != null ? this.options.compress : true;\r\n\r\n    this._pageBuffer = [];\r\n    this._pageBufferStart = 0;\r\n\r\n    // The PDF object store\r\n    this._offsets = [];\r\n    this._waiting = 0;\r\n    this._ended = false;\r\n    this._offset = 0;\r\n    const Pages = this.ref({\r\n      Type: 'Pages',\r\n      Count: 0,\r\n      Kids: []\r\n    });\r\n\r\n    Pages.finalize = function() {\r\n      this.offset = this.document._offset;\r\n      this.document._write(this.id + ' ' + this.gen + ' obj');\r\n      this.document._write('<<');\r\n      this.document._write('/Type /Pages');\r\n      this.document._write(`/Count ${this.data.Count}`);\r\n      this.document._write(\r\n        `/Kids [${Buffer.concat(this.data.Kids)\r\n          .slice(0, -1)\r\n          .toString()}]`\r\n      );\r\n      this.document._write('>>');\r\n      this.document._write('endobj');\r\n      return this.document._refEnd(this);\r\n    };\r\n\r\n    this._root = this.ref({\r\n      Type: 'Catalog',\r\n      Pages\r\n    });\r\n\r\n    // The current page\r\n    this.page = null;\r\n\r\n    // Initialize mixins\r\n    this.initColor();\r\n    this.initVector();\r\n    this.initFonts(options.font);\r\n    this.initText();\r\n    this.initImages();\r\n    this.initOutline();\r\n\r\n    // Initialize the metadata\r\n    this.info = {\r\n      Producer: 'PDFKit',\r\n      Creator: 'PDFKit',\r\n      CreationDate: new Date()\r\n    };\r\n\r\n    if (this.options.info) {\r\n      for (let key in this.options.info) {\r\n        const val = this.options.info[key];\r\n        this.info[key] = val;\r\n      }\r\n    }\r\n\r\n    // Generate file ID\r\n    this._id = PDFSecurity.generateFileID(this.info);\r\n\r\n    // Initialize security settings\r\n    this._security = PDFSecurity.create(this, options);\r\n\r\n    // Write the header\r\n    // PDF version\r\n    this._write(`%PDF-${this.version}`);\r\n\r\n    // 4 binary chars, as recommended by the spec\r\n    this._write('%\\xFF\\xFF\\xFF\\xFF');\r\n\r\n    // Add the first page\r\n    if (this.options.autoFirstPage !== false) {\r\n      this.addPage();\r\n    }\r\n  }\r\n\r\n  addPage(options) {\r\n    // end the current page if needed\r\n    if (options == null) {\r\n      ({ options } = this);\r\n    }\r\n    if (!this.options.bufferPages) {\r\n      this.flushPages();\r\n    }\r\n\r\n    // create a page object\r\n    this.page = new PDFPage(this, options);\r\n    this._pageBuffer.push(this.page);\r\n\r\n    // add the page to the object store\r\n    const pages = this._root.data.Pages.data;\r\n    pages.Kids.push(new Buffer(this.page.dictionary + ' '));\r\n    pages.Count++;\r\n\r\n    // reset x and y coordinates\r\n    this.x = this.page.margins.left;\r\n    this.y = this.page.margins.top;\r\n\r\n    // flip PDF coordinate system so that the origin is in\r\n    // the top left rather than the bottom left\r\n    this._ctm = [1, 0, 0, 1, 0, 0];\r\n    this.transform(1, 0, 0, -1, 0, this.page.height);\r\n\r\n    this.emit('pageAdded');\r\n\r\n    return this;\r\n  }\r\n\r\n  bufferedPageRange() {\r\n    return { start: this._pageBufferStart, count: this._pageBuffer.length };\r\n  }\r\n\r\n  switchToPage(n) {\r\n    let page;\r\n    if (!(page = this._pageBuffer[n - this._pageBufferStart])) {\r\n      throw new Error(\r\n        `switchToPage(${n}) out of bounds, current buffer covers pages ${\r\n          this._pageBufferStart\r\n        } to ${this._pageBufferStart + this._pageBuffer.length - 1}`\r\n      );\r\n    }\r\n\r\n    return (this.page = page);\r\n  }\r\n\r\n  flushPages() {\r\n    // this local variable exists so we're future-proof against\r\n    // reentrant calls to flushPages.\r\n    const pages = this._pageBuffer;\r\n    this._pageBuffer = [];\r\n    this._pageBufferStart += pages.length;\r\n    for (let page of pages) {\r\n      page.end();\r\n    }\r\n  }\r\n\r\n  ref(data) {\r\n    const ref = new PDFReference(this, this._offsets.length + 1, data);\r\n    this._offsets.push(null); // placeholder for this object's offset once it is finalized\r\n    this._waiting++;\r\n    return ref;\r\n  }\r\n\r\n  _read() {}\r\n  // do nothing, but this method is required by node\r\n\r\n  _write(data) {\r\n    if (!Buffer.isBuffer(data)) {\r\n      data = new Buffer(data + '\\n', 'binary');\r\n    }\r\n\r\n    this.push(data);\r\n    return (this._offset += data.length);\r\n  }\r\n\r\n  addContent(data) {\r\n    this.page.write(data);\r\n    return this;\r\n  }\r\n\r\n  _refEnd(ref) {\r\n    this._offsets[ref.id - 1] = ref.offset;\r\n    if (--this._waiting === 0 && this._ended) {\r\n      this._finalize();\r\n      return (this._ended = false);\r\n    }\r\n  }\r\n\r\n  write(filename, fn) {\r\n    // print a deprecation warning with a stacktrace\r\n    const err = new Error(`\\\r\nPDFDocument#write is deprecated, and will be removed in a future version of PDFKit. \\\r\nPlease pipe the document into a Node stream.\\\r\n`);\r\n\r\n    console.warn(err.stack);\r\n\r\n    this.pipe(fs.createWriteStream(filename));\r\n    this.end();\r\n    return this.once('end', fn);\r\n  }\r\n\r\n  output(fn) {\r\n    // more difficult to support this. It would involve concatenating all the buffers together\r\n    throw new Error(`\\\r\nPDFDocument#output is deprecated, and has been removed from PDFKit. \\\r\nPlease pipe the document into a Node stream.\\\r\n`);\r\n  }\r\n\r\n  end() {\r\n    this.flushPages();\r\n    this._info = this.ref();\r\n    for (let key in this.info) {\r\n      let val = this.info[key];\r\n      if (typeof val === 'string') {\r\n        val = new String(val);\r\n      }\r\n\r\n      let entry = this.ref(val);\r\n      entry.end();\r\n\r\n      this._info.data[key] = entry;\r\n    }\r\n\r\n    this._info.end();\r\n\r\n    for (let name in this._fontFamilies) {\r\n      const font = this._fontFamilies[name];\r\n      font.finalize();\r\n    }\r\n\r\n    this.endOutline();\r\n\r\n    this._root.end();\r\n    this._root.data.Pages.end();\r\n\r\n    if (this._security) {\r\n      this._security.end();\r\n    }\r\n\r\n    if (this._waiting === 0) {\r\n      return this._finalize();\r\n    } else {\r\n      return (this._ended = true);\r\n    }\r\n  }\r\n\r\n  _finalize(fn) {\r\n    // generate xref\r\n    const xRefOffset = this._offset;\r\n    this._write('xref');\r\n    this._write(`0 ${this._offsets.length + 1}`);\r\n    this._write('0000000000 65535 f ');\r\n\r\n    for (let offset of this._offsets) {\r\n      offset = `0000000000${offset}`.slice(-10);\r\n      this._write(offset + ' 00000 n ');\r\n    }\r\n\r\n    // trailer\r\n    const trailer = {\r\n      Size: this._offsets.length + 1,\r\n      Root: this._root,\r\n      Info: this._info,\r\n      ID: [this._id, this._id]\r\n    };\r\n    if (this._security) {\r\n      trailer.Encrypt = this._security.dictionary;\r\n    }\r\n\r\n    this._write('trailer');\r\n    this._write(PDFObject.convert(trailer));\r\n\r\n    this._write('startxref');\r\n    this._write(`${xRefOffset}`);\r\n    this._write('%%EOF');\r\n\r\n    // end the stream\r\n    return this.push(null);\r\n  }\r\n\r\n  toString() {\r\n    return '[object PDFDocument]';\r\n  }\r\n}\r\n\r\nconst mixin = methods => {\r\n  Object.assign(PDFDocument.prototype, methods);\r\n};\r\n\r\nmixin(ColorMixin);\r\nmixin(VectorMixin);\r\nmixin(FontsMixin);\r\nmixin(TextMixin);\r\nmixin(ImagesMixin);\r\nmixin(AnnotationsMixin);\r\nmixin(OutlineMixin);\r\n\r\nexport default PDFDocument;\r\n"],"names":["PDFAbstractReference","Error","pad","str","length","Array","join","slice","escapableRe","escapable","swapBytes","buff","l","i","end","a","PDFObject","convert","object","encryptFn","String","string","isUnicode","charCodeAt","stringBuffer","Buffer","from","valueOf","toString","replace","c","isBuffer","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","isArray","items","map","e","call","out","key","val","push","number","n","Math","round","PDFReference","document","id","data","gen","compress","Filter","uncompressedLength","buffer","chunk","Length","write","finalize","offset","_offset","_security","getEncryptFn","concat","zlib","deflateSync","_write","_refEnd","DEFAULT_MARGINS","SIZES","PDFPage","options","size","layout","margin","margins","dimensions","toUpperCase","width","height","content","ref","resources","dictionary","_root","Pages","fonts","Font","xobjects","XObject","ext_gstates","ExtGState","patterns","Pattern","annotations","Annots","bottom","PDFSecurity","generateFileID","info","infoStr","CreationDate","getTime","hasOwnProperty","wordArrayToBuffer","CryptoJS","MD5","generateRandomWordArray","bytes","lib","WordArray","random","create","ownerPassword","userPassword","_setupEncryption","pdfVersion","version","encDict","_setupEncryptionV1V2V4","_setupEncryptionV5","v","r","permissions","keyBits","getPermissionsR2","getPermissionsR3","paddedUserPassword","processPasswordR2R3R4","paddedOwnerPassword","ownerPasswordEntry","getOwnerPasswordR2R3R4","encryptionKey","getEncryptionKeyR2R3R4","_id","userPasswordEntry","getUserPasswordR2","getUserPasswordR3R4","V","CF","StmF","StrF","R","O","U","P","processedUserPassword","processPasswordR5","processedOwnerPassword","getEncryptionKeyR5","getUserPasswordR5","userKeySalt","words","userEncryptionKeyEntry","getUserEncryptionKeyR5","getOwnerPasswordR5","ownerKeySalt","ownerEncryptionKeyEntry","getOwnerEncryptionKeyR5","permsEntry","getEncryptedPermissionsR5","OE","UE","Perms","obj","digest","clone","sigBytes","min","RC4","encrypt","ciphertext","iv","mode","CBC","Pkcs7","AES","permissionObject","printing","modifying","copying","annotating","fillingForms","contentAccessibility","documentAssembly","documentId","cipher","xorRound","ceil","j","lsbFirstWord","validationSalt","keySalt","SHA256","NoPadding","ECB","password","index","code","PASSWORD_PADDING","unescape","encodeURIComponent","saslprep","wordArray","byteArray","floor","PDFGradient","doc","stops","embedded","transform","pos","color","opacity","_normalizeColor","_colorSpace","max","m11","m12","m21","m22","dx","dy","m","fn","matrix","last","bounds","encode","stopsLength","_gradCount","shader","pattern","some","stop","grad","opacityGradient","embed","pageBBox","page","form","gstate","opacityPattern","op","m0","m1","m2","m3","m4","m5","_ctm","addContent","PDFLinearGradient","x1","y1","x2","y2","PDFRadialGradient","r1","r2","Gradient","_opacityRegistry","_opacityCount","charAt","hex","parseInt","namedColors","part","stroke","_setColorSpace","apply","space","set","_setColor","fillOpacity","_fillColor","strokeOpacity","_doOpacity","name","Type","ca","CA","cx","cy","px","py","sx","sy","parameters","parse","path","cmd","ret","args","curArg","foundDecimal","params","includes","commands","runners","moveTo","bezierCurveTo","quadraticCurveTo","lineTo","closePath","solveArc","x","y","coords","rx","ry","rot","large","sweep","ex","ey","segs","arcToSegments","seg","bez","segmentToBezier","rotateX","ox","oy","th","PI","sin_th","sin","cos_th","cos","abs","pl","sqrt","a00","a01","a10","a11","x0","y0","d","sfactor_sq","sfactor","xc","yc","th0","atan2","th1","th_arc","segments","result","th2","th3","th_half","t","x3","y3","SVGPath","KAPPA","_ctmStack","pop","w","_CAP_STYLES","_JOIN_STYLES","phase","cp1x","cp1y","cp2x","cp2y","cpx","cpy","h","xe","ye","xm","ym","radius","ellipse","startAngle","endAngle","anticlockwise","TWO_PI","HALF_PI","deltaAng","dir","numSegs","segAng","handleLen","curAng","deltaCx","deltaCy","ax","ay","segIdx","points","shift","point","rule","test","fillColor","_windingRule","strokeColor","isFillRule","values","angle","rad","origin","xFactor","yFactor","WIN_ANSI_MAP","characters","split","AFMFont","open","filename","fs","readFileSync","contents","attributes","glyphWidths","boundingBoxes","kernPairs","charWidths","char","bbox","ascender","descender","xHeight","capHeight","lineGap","section","line","match","value","text","res","len","glyphs","charCode","characterToGlyph","character","glyph","left","right","advances","widthOfGlyph","getKernPair","PDFFont","includeGap","gap","STANDARD_FONTS","__dirname","StandardFont","font","encoded","encodeText","glyphsForString","advancesForGlyphs","positions","advance","scale","isStandardFont","toHex","num","EmbeddedFont","subset","createSubset","unicode","widths","getGlyph","advanceWidth","postscriptName","unitsPerEm","ascent","descent","fontLayoutCache","layoutCache","Object","features","run","position","layoutRun","cached","onlyWidth","needle","layoutCached","gid","includeGlyph","codePoints","isCFF","cff","fontFile","Subtype","encodeStream","on","familyClass","sFamilyClass","undefined","flags","post","isFixedPitch","head","macStyle","italic","tag","fromCharCode","descriptor","minX","minY","maxX","maxY","italicAngle","FontFile3","FontFile2","descendantFont","toUnicodeCmap","cmap","entries","PDFFontFactory","src","family","fontkit","Uint8Array","ArrayBuffer","defaultFont","_fontFamilies","_fontCount","_fontSize","_font","_registeredFonts","cacheKey","fontSize","lineHeight","LineWrapper","EventEmitter","indent","characterSpacing","wordSpacing","columns","columnGap","lineWidth","spaceLeft","startX","startY","column","ellipsis","continuedX","once","continued","align","lastLine","paragraphGap","word","widthOfString","bk","breaker","LineBreaker","wordWidths","nextBreak","shouldContinue","wordWidth","lbk","fbk","mightGrow","mustShrink","required","nextY","currentLineHeight","nextSection","textWidth","wc","lc","emitLine","wordCount","emit","eachWord","lh","addPage","top","_line","bind","_lineGap","lines","lineCallback","_initOptions","wrapper","_wrapper","_textOptions","wrap","_text","Infinity","list","listType","unit","midLine","bulletRadius","textIndent","itemIndent","bulletIndent","level","levels","numbers","flatten","item","label","letter","times","diff","circle","fill","_fragment","assign","lineBreak","trim","spaceWidth","baseline","renderedWidth","link","underline","strike","save","lineY","restore","oblique","skew","tan","encodedWord","positionsWord","xAdvance","hadOffset","addSegment","cur","flush","xOffset","yOffset","MARKERS","COLOR_SPACE_MAP","JPEG","marker","readUInt16BE","bits","channels","colorSpace","PNGImage","image","PNG","imgData","hasAlphaChannel","colors","palette","transparency","grayscale","rgb","mask","indexed","loadIndexedAlphaChannel","splitAlphaChannel","alphaChannel","sMask","decodePixels","pixels","p","colorCount","pixelCount","skipByteCount","colorIndex","PDFImage","exec","_imageRegistry","_imageCount","bh","bp","bw","ip","left1","openImage","wp","hp","fit","cover","valign","Rect","_convertRect","Border","C","Dest","Contents","Name","annotate","url","pages","Kids","A","QuadPoints","_markup","L","DA","PDFOutline","parent","title","dest","expanded","outlineData","children","Count","first","First","Last","child","Prev","Next","endOutline","outline","Outlines","PageMode","PDFDocument","stream","Readable","_pageBuffer","_pageBufferStart","_offsets","_waiting","_ended","initColor","initVector","initFonts","initText","initImages","initOutline","autoFirstPage","bufferPages","flushPages","start","count","_finalize","err","warn","stack","pipe","createWriteStream","_info","entry","xRefOffset","trailer","Encrypt","mixin","methods","prototype","ColorMixin","VectorMixin","FontsMixin","TextMixin","ImagesMixin","AnnotationsMixin","OutlineMixin"],"mappings":"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"}